if (self.CavalryLogger) { CavalryLogger.start_js(["iQbA8"]); }

__d("VideoPlayerAbrTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("vpabr_proxy:VideoPlayerAbrLoggerConfig",this.$VideoPlayerAbrTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("vpabr_proxy:VideoPlayerAbrLoggerConfig",this.$VideoPlayerAbrTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoPlayerAbrTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoPlayerAbrTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerAbrTypedLogger1,j);return this};h.prototype.setBandwidthEstimate=function(j){this.$VideoPlayerAbrTypedLogger1.bandwidth_estimate=j;return this};h.prototype.setBufferedAhead=function(j){this.$VideoPlayerAbrTypedLogger1.buffered_ahead=j;return this};h.prototype.setBytes=function(j){this.$VideoPlayerAbrTypedLogger1.bytes=j;return this};h.prototype.setClientTime=function(j){this.$VideoPlayerAbrTypedLogger1.client_time=j;return this};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_begin=j;return this};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerAbrTypedLogger1.client_time_end=j;return this};h.prototype.setDelayMs=function(j){this.$VideoPlayerAbrTypedLogger1.delay_ms=j;return this};h.prototype.setEvent=function(j){this.$VideoPlayerAbrTypedLogger1.event=j;return this};h.prototype.setPlayhead=function(j){this.$VideoPlayerAbrTypedLogger1.playhead=j;return this};h.prototype.setReason=function(j){this.$VideoPlayerAbrTypedLogger1.reason=j;return this};h.prototype.setRepresentationID=function(j){this.$VideoPlayerAbrTypedLogger1.representation_id=j;return this};h.prototype.setSession=function(j){this.$VideoPlayerAbrTypedLogger1.session=j;return this};h.prototype.setUnsampledReason=function(j){this.$VideoPlayerAbrTypedLogger1.unsampled_reason=j;return this};h.prototype.setVC=function(j){this.$VideoPlayerAbrTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$VideoPlayerAbrTypedLogger1.video_id=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$VideoPlayerAbrTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerAbrTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={bandwidth_estimate:true,buffered_ahead:true,bytes:true,client_time:true,client_time_begin:true,client_time_end:true,delay_ms:true,event:true,playhead:true,reason:true,representation_id:true,session:true,unsampled_reason:true,vc:true,video_id:true};f.exports=h}),null);
__d("VideoPlayerShakaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("vpsp_proxy:VideoPlayerShakaPerformanceLoggerConfig",this.$VideoPlayerShakaPerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoPlayerShakaPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1=babelHelpers["extends"]({},this.$VideoPlayerShakaPerformanceTypedLogger1,j);return this};h.prototype.setAccessToken=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.access_token=j;return this};h.prototype.setAdditionalBufferedRanges=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.additional_buffered_ranges=j;return this};h.prototype.setClientTimeBegin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_begin=j;return this};h.prototype.setClientTimeEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.client_time_end=j;return this};h.prototype.setCode=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.code=j;return this};h.prototype.setError=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.error=j;return this};h.prototype.setEvent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.event=j;return this};h.prototype.setInitiator=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.initiator=j;return this};h.prototype.setIsLive=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.is_live=j;return this};h.prototype.setLastBufferedEnd=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_end=j;return this};h.prototype.setLastBufferedStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_buffered_start=j;return this};h.prototype.setLastPlayingEventTime=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.last_playing_event_time=j;return this};h.prototype.setLength=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.length=j;return this};h.prototype.setLiveheadDelta=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.livehead_delta=j;return this};h.prototype.setParentID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.parent_id=j;return this};h.prototype.setPlayerOriginCallerSpecified=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_origin_caller_specified=j;return this};h.prototype.setPlayerSuborigin=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.player_suborigin=j;return this};h.prototype.setPlayhead=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.playhead=j;return this};h.prototype.setPriority=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.priority=j;return this};h.prototype.setPushed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.pushed=j;return this};h.prototype.setRepresentationID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.representation_id=j;return this};h.prototype.setRescheduleCount=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.reschedule_count=j;return this};h.prototype.setResource=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.resource=j;return this};h.prototype.setResult=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.result=j;return this};h.prototype.setScriptPath=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.script_path=j;return this};h.prototype.setSequentialID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.sequential_id=j;return this};h.prototype.setSession=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.session=j;return this};h.prototype.setState=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.state=j;return this};h.prototype.setStreamSwitchReason=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.stream_switch_reason=j;return this};h.prototype.setTimeToFirstByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_first_byte=j;return this};h.prototype.setTimeToLastByte=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_last_byte=j;return this};h.prototype.setTimeToRequestSent=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_sent=j;return this};h.prototype.setTimeToRequestStart=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.time_to_request_start=j;return this};h.prototype.setType=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.type=j;return this};h.prototype.setVC=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.vc=j;return this};h.prototype.setVideoDuration=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_duration=j;return this};h.prototype.setVideoID=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.video_id=j;return this};h.prototype.setWasDelayed=function(j){this.$VideoPlayerShakaPerformanceTypedLogger1.was_delayed=j;return this};var i={access_token:true,additional_buffered_ranges:true,client_time_begin:true,client_time_end:true,code:true,error:true,event:true,initiator:true,is_live:true,last_buffered_end:true,last_buffered_start:true,last_playing_event_time:true,length:true,livehead_delta:true,parent_id:true,player_origin_caller_specified:true,player_suborigin:true,playhead:true,priority:true,pushed:true,representation_id:true,reschedule_count:true,resource:true,result:true,script_path:true,sequential_id:true,session:true,state:true,stream_switch_reason:true,time_to_first_byte:true,time_to_last_byte:true,time_to_request_sent:true,time_to_request_start:true,type:true,vc:true,video_duration:true,video_id:true,was_delayed:true};f.exports=h}),null);
__d("TaggedTimeRanges",["sprintf"],(function a(b,c,d,e,f,g){function h(i){"use strict";this.$TaggedTimeRanges1=[];this.$TaggedTimeRanges2=0;this.$TaggedTimeRanges3=0;this.$TaggedTimeRanges4=i?i:function(j,k){return j===k}}h.prototype.add=function(i,j,k){"use strict";if(j<i)return;if(j===i)return;if(this.$TaggedTimeRanges1.length===0){this.$TaggedTimeRanges1.push({start:i,end:j,tag:k});return}var l=0,m=0;for(var n=0;n<this.$TaggedTimeRanges1.length;n++){if(i>=this.$TaggedTimeRanges1[n].start)l=n+1;if(j<=this.$TaggedTimeRanges1[n].end)m=n;if(j<this.$TaggedTimeRanges1[n].start)break}this.$TaggedTimeRanges1.splice(l,m-l,{start:i,end:j,tag:k});this.$TaggedTimeRanges5(l)};h.prototype.$TaggedTimeRanges5=function(i){"use strict";var j=this.$TaggedTimeRanges1[i],k=null;if(i!==0)k=this.$TaggedTimeRanges1[i-1];if(k!==null)if(this.$TaggedTimeRanges4(k.tag,j.tag)){if(k.end>=j.start){this.$TaggedTimeRanges1.splice(i-1,2,{start:k.start,end:Math.max(j.end,k.end),tag:j.tag});i--}}else{if(k.end>=j.start)this.$TaggedTimeRanges1.splice(i-1,1,{start:k.start,end:j.start,tag:k.tag});if(k.end>j.end)this.$TaggedTimeRanges1.splice(i+1,0,{start:j.end,end:k.end,tag:k.tag})}var l=null;if(i!==this.$TaggedTimeRanges1.length-1)l=this.$TaggedTimeRanges1[i+1];if(l)if(this.$TaggedTimeRanges4(l.tag,j.tag)){if(l.start<=j.end)this.$TaggedTimeRanges1.splice(i,2,{start:j.start,end:Math.max(l.end,j.end),tag:j.tag})}else if(l.start<=j.end)if(l.end<j.end){this.$TaggedTimeRanges1.splice(i,1,{start:j.start,end:l.start,tag:j.tag});this.$TaggedTimeRanges1.push({start:l.end,end:j.end,tag:j.tag})}else this.$TaggedTimeRanges1.splice(i+1,1,{start:j.end,end:l.end,tag:l.tag})};h.prototype.get=function(i){"use strict";var j=i>=this.$TaggedTimeRanges3?this.$TaggedTimeRanges2:0,k=null;for(var l=j;l<this.$TaggedTimeRanges1.length;l++)if(this.$TaggedTimeRanges1[l].start<=i&&i<this.$TaggedTimeRanges1[l].end){k=l;break}this.$TaggedTimeRanges2=k===null?0:k;this.$TaggedTimeRanges3=i;return k===null?null:this.$TaggedTimeRanges1[k].tag};h.prototype.getLength=function(){"use strict";return this.$TaggedTimeRanges1.length};f.exports=h}),null);
__d("dispatchCustomEvent",[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=void 0;if(typeof b.CustomEvent==="function")l=new b.CustomEvent(j,{detail:k});else{l=b.document.createEvent("CustomEvent");l.initCustomEvent(j,true,true,k)}i.dispatchEvent(l)}f.exports=h}),null);
__d("VideoPlayerUtils",[],(function a(b,c,d,e,f,g){var h={getBufferedAheadOf:function i(j){var k=1/60,l=j.currentTime,m=j.buffered;for(var n=0;n<m.length;n++){var o=m.start(n)-k,p=m.end(n)+k;if(l>=o&&l<=p)return m.end(n)-l}return 0}};f.exports=h}),null);
__d("concatArrayBuffer",[],(function a(b,c,d,e,f,g){"use strict";var h=function h(i,j){var k=new Uint8Array(i.byteLength+j.byteLength);k.set(new Uint8Array(i),0);k.set(new Uint8Array(j),i.byteLength);return k.buffer};f.exports=h}),null);
__d("extractCEA608",["JSResource"],(function a(b,c,d,e,f,g){var h=null;function i(j,k){if(!h)h=c("JSResource")("CEA608Extractor").__setRef("extractCEA608").load().then(function(l){return new l(k)});return h.then(function(l){return l.extract(j)})}f.exports=i}),null);
__d("MultipleSegmentsProvider",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){this.$MultipleSegmentsProvider2=[];this.$MultipleSegmentsProvider1=j}i.prototype.getNumberOfSegments=function(){return this.$MultipleSegmentsProvider1};i.prototype.setFutureSegments=function(j){this.$MultipleSegmentsProvider2=j};i.prototype.getFetchRange=function(j){this.$MultipleSegmentsProvider2.length>0||h(0);var k=this.$MultipleSegmentsProvider2[0],l=this.$MultipleSegmentsProvider2[this.$MultipleSegmentsProvider2.length-1];return{startByte:k.url.startByte||0,endByte:l.url.endByte||0}};f.exports=i}),null);
__d("VideoSegmentInfoHelper",["URI","VideoAkamaiRequestHelper","VideoDashPrefetchCache","XHRRequest","getCrossOriginTransport"],(function a(b,c,d,e,f,g){"use strict";function h(m){var n,o=m.requestInfo,p=new(c("XHRRequest"))(j(o)).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(c("getCrossOriginTransport")),q=/livestream-lookaside\.facebook\.com$/,r=q.test(p.getURI().getDomain());if(r)p.setTransportBuilder(c("getCrossOriginTransport").withCredentials);if(c("VideoAkamaiRequestHelper").isAkamai(o.baseUrl))(function(){var s=c("VideoAkamaiRequestHelper").getRequestHeaders(o);if(s)Object.keys(s).forEach(function(t){p.setRequestHeader(t,s[t])})})();return p}function i(m){var n=m.requestInfo,o=n.startByte,p=n.endByte;if(o&&p)return p-o;return null}function j(m){var n=m.baseUrl,o=m.startByte,p=m.endByte,q=new(c("URI"))(n);if(!c("VideoAkamaiRequestHelper").isAkamai(m.baseUrl)){if(o!==null&&o!==undefined)q=q.addQueryData({bytestart:o});if(p!==null&&p!==undefined)q=q.addQueryData({byteend:p})}return q}function k(m){return c("VideoDashPrefetchCache").hasCacheValue(j(m.requestInfo).toString())}function l(m){return m.baseUrl+","+(m.startByte||0)+(","+(m.endByte||0))}f.exports={createRequest:h,estimateRequestSize:i,getRequestUri:j,isPrefetchedRequest:k,getRequestCacheKey:l}}),null);
__d("SegmentsUpdateHelper",["Map","VideoSegmentInfoHelper"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){this.$SegmentsUpdateHelper1=i;this.$SegmentsUpdateHelper2=j}h.prototype.updateSegments=function(i,j){if(!j.length)return;var k=this.$SegmentsUpdateHelper2.get(i)||[],l=k[k.length-1],m=l?l.startTime:-1,n=j.length;while(n>0){var o=j[n-1];if(o.startTime<=m)break;n--}var p=j.slice(n),q=j.slice(0,n);this.$SegmentsUpdateHelper3(k,q);var r=p.map(function(s){return this.$SegmentsUpdateHelper4(s)}.bind(this));r.forEach(function(s){this.$SegmentsUpdateHelper5(s);k.push(s)}.bind(this));this.$SegmentsUpdateHelper2.set(i,k)};h.prototype.$SegmentsUpdateHelper4=function(i){var j=i.startTime,k=i.endTime,l=i.url,m=l.baseUrl,n=l.startByte,o=l.endByte,p={segmentID:0,startTime:j,endTime:k,requestInfo:{baseUrl:m,startByte:n,endByte:o||undefined}};return p};h.prototype.$SegmentsUpdateHelper6=function(i,j){var k=j.startTime,l=j.endTime,m=j.url,n=m.baseUrl,o=m.startByte,p=m.endByte;i.segmentID=0;i.startTime=k;i.endTime=l;var q=i.requestInfo;q.baseUrl=n;q.startByte=o;q.endByte=p||undefined;return i};h.prototype.$SegmentsUpdateHelper3=function(i,j){if(!j.length)return;var k=j.length,l=function l(){var v=j[k-1]||null;k--;return v},m=l(),n=Number.POSITIVE_INFINITY;for(var o=0;o<=i.length&&m!=null;o++){var p=i.length-o,q=i[p-1],r=p>=1?q.startTime:Number.NEGATIVE_INFINITY,s=void 0;if(r<=m.startTime&&m.endTime<=n){if(r===m.startTime){var t=c("VideoSegmentInfoHelper").getRequestCacheKey(q.requestInfo);s=this.$SegmentsUpdateHelper6(q,m);var u=c("VideoSegmentInfoHelper").getRequestCacheKey(s.requestInfo);if(u!==t){this.$SegmentsUpdateHelper1["delete"](t);this.$SegmentsUpdateHelper5(s)}}else{s=this.$SegmentsUpdateHelper4(m);this.$SegmentsUpdateHelper5(s);i.splice(p,0,s)}m=l()}n=r}};h.prototype.$SegmentsUpdateHelper5=function(i){var j=c("VideoSegmentInfoHelper").getRequestCacheKey(i.requestInfo);this.$SegmentsUpdateHelper1.set(j,i)};f.exports=h}),null);
__d("TrackedPromise",["Promise","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";var h=window.Promise||c("Promise");c("Promise").resolve();function i(j){this.$TrackedPromise3=false;this.$TrackedPromise1=true;this.$TrackedPromise2=j.then(function(k){this.$TrackedPromise1=false;return k}.bind(this),function(k){this.$TrackedPromise1=false;if(!c("VideoPlayerShakaExperiments").fixUncaughtPromiseErrorMessage||this.$TrackedPromise3)return h.reject(k)}.bind(this))}i.prototype.getPromise=function(){this.$TrackedPromise3=true;return this.$TrackedPromise2};i.prototype.isPending=function(){return this.$TrackedPromise1};f.exports=i}),null);
__d("VideoPriorityCalculator",["VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";function h(){return 2}function i(k){var l=k.playhead,m=k.bufferEnd,n=k.isPlaying,o=c("VideoPlayerShakaExperiments").globalSchedulerPriorityThreshold,p=m-l<=o?0:1,q=n?0:1;return h()-p-q}function j(k){var l=k.playhead,m=k.bufferEnd;if(!c("VideoPlayerShakaExperiments").liveBufferCriticalThreshold)return i(k);var n=m-l;if(n<=c("VideoPlayerShakaExperiments").liveBufferCriticalThreshold)return h();return i(k)}f.exports={calculate:i,calculateLive:j,getMaxPriority:h}}),null);
__d("VideoSegmentPromiseBuffer",["Map","Set","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";function h(){this.$VideoSegmentPromiseBuffer1=new(c("Map"))()}h.prototype.appendSegmentPromise=function(i,j){this.$VideoSegmentPromiseBuffer1.set(i,j);return this};h.prototype.hasSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.has(i)};h.prototype.getSegmentPromise=function(i){return this.$VideoSegmentPromiseBuffer1.get(i)||null};h.prototype.hasOtherPendingSegments=function(i){var j=new(c("Set"))(i);return Array.from(this.$VideoSegmentPromiseBuffer1.entries()).some(function(k){return k[1].isPending()&&!j.has(k[0])})};h.prototype.isFirstPendingSegment=function(i){var j=this.$VideoSegmentPromiseBuffer1.get(i);if(!j||!j.isPending())return false;var k=void 0;for(var l=this.$VideoSegmentPromiseBuffer1.entries(),m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;if(p[1].isPending()){k=p[0];break}}return k===i};h.prototype.clearAllSegmentPromises=function(){this.$VideoSegmentPromiseBuffer1.clear();return this};h.prototype.removeSegmentPromisesOlderThan=function(i){if(!this.hasSegmentPromise(i)){if(c("VideoPlayerShakaExperiments").fixingOldPromiseClearance)this.$VideoSegmentPromiseBuffer1.clear();return}for(var j=this.$VideoSegmentPromiseBuffer1.keys(),k=Array.isArray(j),l=0,j=k?j:j[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(k){if(l>=j.length)break;m=j[l++]}else{l=j.next();if(l.done)break;m=l.value}var n=m;if(n===i)return;this.$VideoSegmentPromiseBuffer1["delete"](n)}};h.prototype.removeSegmentPromise=function(i){this.$VideoSegmentPromiseBuffer1["delete"](i)};f.exports=h}),null);
__d("NetworkRequestPipelineStats",["Set"],(function a(b,c,d,e,f,g){"use strict";var h=5,i=.5,j=30;function k(){this.$NetworkRequestPipelineStats1={};this.$NetworkRequestPipelineStats2={};this.$NetworkRequestPipelineStats3=0;this.$NetworkRequestPipelineStats4=0;this.$NetworkRequestPipelineStats5=0;this.$NetworkRequestPipelineStats6=0;this.$NetworkRequestPipelineStats7=new(c("Set"))()}k.prototype.addEntry=function(l,m){this.$NetworkRequestPipelineStats6=Math.max(this.$NetworkRequestPipelineStats6,l);if(!m)return;this.$NetworkRequestPipelineStats1[l]=m;var n=this.$NetworkRequestPipelineStats1[l-1];if(!this.$NetworkRequestPipelineStats7.has(l-1)&&n)this.$NetworkRequestPipelineStats8(n,m,l);var o=this.$NetworkRequestPipelineStats1[l+1];if(!this.$NetworkRequestPipelineStats7.has(l)&&o)this.$NetworkRequestPipelineStats8(m,o,l+1)};k.prototype.setNetworkIdle=function(){this.$NetworkRequestPipelineStats7.add(this.$NetworkRequestPipelineStats6)};k.prototype.$NetworkRequestPipelineStats8=function(l,m,n){this.$NetworkRequestPipelineStats2[n]=m.startTime+m.timeToFirstByte-(l.startTime+l.timeToLastByte)};k.prototype.getBandwidthAlignments=function(){return this.$NetworkRequestPipelineStats2};k.prototype.getBandwidthUtilization=function(){var l=0,m=0;Object.keys(this.$NetworkRequestPipelineStats2).forEach(function(n){var o=Number.parseInt(n,10),p=this.$NetworkRequestPipelineStats2[o],q=this.$NetworkRequestPipelineStats1[o],r=q.timeToLastByte-q.timeToFirstByte;l+=r;m+=Math.max(0,p)+r}.bind(this));return l/Math.max(1,m)};k.prototype.$NetworkRequestPipelineStats9=function(l){var m=[],n=0;while(true){var o=this.$NetworkRequestPipelineStats1[this.$NetworkRequestPipelineStats6-n];if(!o)break;if(o.timeToLastByte-o.timeToFirstByte>=j)m.push(o);n++}return m};k.prototype.getEstimatedDownloadTime=function(l){if(l){var m=this.$NetworkRequestPipelineStats10();if(!m)return 0;return l/m}return this.$NetworkRequestPipelineStats11(function(n){return n.timeToLastByte-n.timeToFirstByte},{lastN:h,defaultValue:0})};k.prototype.$NetworkRequestPipelineStats10=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.transferSize/(l.timeToLastByte-l.timeToFirstByte||1)},{lastN:h,defaultValue:0})};k.prototype.$NetworkRequestPipelineStats11=function(l,m){var n=m.lastN,o=m.defaultValue,p=this.$NetworkRequestPipelineStats9(n);if(!p.length)return o;return p.reverse().reduce(function(q,r){return i*l(r)+(1-i)*q},l(p[0]))};k.prototype.getEstimatedTimeToFirstByte=function(){return this.$NetworkRequestPipelineStats11(function(l){return l.timeToFirstByte},{lastN:h,defaultValue:5e3})};k.prototype.getOptimisticTimeToFirstByte=function(){var l=this.$NetworkRequestPipelineStats9(h);if(!l.length)return 0;var m=Math.min.apply(Math,l.map(function(o){return o.timeToFirstByte})),n=this.$NetworkRequestPipelineStats11(function(o){return o.timeToFirstByte},{lastN:h,defaultValue:5e3});return(m+n)/2};f.exports=k}),null);
__d("getXHRRequestHandlerHelper",[],(function a(b,c,d,e,f,g){"use strict";function h(k,l,m,n){var o=l.call(k);m.call(k,function(){o&&o.apply(undefined,arguments);n.apply(undefined,arguments)})}function i(k){this.$XHRRequestHandlerHelper1=k}i.prototype.addResponseHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getResponseHandler,this.$XHRRequestHandlerHelper1.setResponseHandler,k);return this};i.prototype.addAbortHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getAbortHandler,this.$XHRRequestHandlerHelper1.setAbortHandler,k);return this};i.prototype.addErrorHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getErrorHandler,this.$XHRRequestHandlerHelper1.setErrorHandler,k);return this};i.prototype.addNetworkFailureHandler=function(k){h(this.$XHRRequestHandlerHelper1,this.$XHRRequestHandlerHelper1.getNetworkFailureHandler,this.$XHRRequestHandlerHelper1.setNetworkFailureHandler,k);return this};function j(k){return new i(k)}f.exports=j}),null);
__d("NetworkRequestPipeline",["EventEmitter","Map","NetworkRequestPipelineStats","VideoPlayerResourceTimer","VideoPlayerShakaExperiments","getXHRRequestHandlerHelper","performanceNow","setTimeoutAcrossTransitions","setTimeout","clearTimeout"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("VideoPlayerShakaExperiments").timeoutsPersistOnPageTransition?c("setTimeoutAcrossTransitions"):c("setTimeout"),k=2,l=1;h=babelHelpers.inherits(m,c("EventEmitter"));i=h&&h.prototype;function m(n,o){i.constructor.call(this);this.$NetworkRequestPipeline1=k;this.$NetworkRequestPipeline2=l;this.$NetworkRequestPipeline3=0;this.$NetworkRequestPipeline4=new(c("NetworkRequestPipelineStats"))();this.$NetworkRequestPipeline5=0;this.$NetworkRequestPipeline6=new(c("Map"))();this.$NetworkRequestPipeline11=null;this.$NetworkRequestPipeline12=null;this.$NetworkRequestPipeline14=function(){if(!this.$NetworkRequestPipeline13){this.$NetworkRequestPipeline13=this.$NetworkRequestPipeline15();this.$NetworkRequestPipeline12=null;this.$NetworkRequestPipeline16()}}.bind(this);this.$NetworkRequestPipeline8=n;var p=o||{},q=p.xhrHandleNetworkFailure,r=p.maxConcurrentRequests,s=p.soothingFactor,t=p.fixFinishRequest;this.$NetworkRequestPipeline9=!!q;this.$NetworkRequestPipeline10=!!t;this.$NetworkRequestPipeline8.setOnItemAdded(this.$NetworkRequestPipeline14);if(r!==undefined)this.$NetworkRequestPipeline1=r;if(s!==undefined)this.$NetworkRequestPipeline2=s;this.$NetworkRequestPipeline14()}m.prototype.$NetworkRequestPipeline17=function(){var n=this.$NetworkRequestPipeline3;this.$NetworkRequestPipeline3++;return n};m.prototype.$NetworkRequestPipeline16=function(){if(this.$NetworkRequestPipeline13&&this.$NetworkRequestPipeline5<this.$NetworkRequestPipeline1){var n=this.$NetworkRequestPipeline18(this.$NetworkRequestPipeline13);if(!n)this.$NetworkRequestPipeline13=null}};m.prototype.$NetworkRequestPipeline19=function(n){if(n.hasEnded)return false;c("clearTimeout")(n.timeout);n.hasEnded=true;this.$NetworkRequestPipeline13=this.$NetworkRequestPipeline15();this.$NetworkRequestPipeline16();return true};m.prototype.$NetworkRequestPipeline18=function(n){if(n.xhrRequest)return true;var o=c("performanceNow")(),p=this.$NetworkRequestPipeline8.dequeue();if(!p){this.$NetworkRequestPipeline4.setNetworkIdle();return false}var q=p.xhrRequest,r=p.estimatedSize,s=false,t=function(){if(!this.$NetworkRequestPipeline10)return false;if(s)return true;s=true;return false}.bind(this),u=void 0,v=function(x){if(!t()){var y=c("VideoPlayerResourceTimer").getResourceTimingEntry(q.getURI().toString(),o,c("performanceNow")());this.$NetworkRequestPipeline4.addEntry(n.id,y);this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline19(n))this.$NetworkRequestPipeline16()}u&&u.remove()}.bind(this),w=function(){if(!t()){this.$NetworkRequestPipeline5--;if(!this.$NetworkRequestPipeline19(n))this.$NetworkRequestPipeline16()}u&&u.remove()}.bind(this);if(!s)u=this.addListener("evict",function(x){if(q===x.xhrRequest)w()});c("getXHRRequestHandlerHelper")(q).addResponseHandler(v).addAbortHandler(w).addErrorHandler(w).addNetworkFailureHandler(function(){if(this.$NetworkRequestPipeline9)w()}.bind(this));n.xhrRequest=q;this.$NetworkRequestPipeline5++;n.timeout=j(function(){return this.$NetworkRequestPipeline19(n)}.bind(this),this.$NetworkRequestPipeline20(q,r||undefined));this.$NetworkRequestPipeline11=this.$NetworkRequestPipeline12;this.$NetworkRequestPipeline12=q.getURI().toString();q.send();return true};m.prototype.evictRequest=function(n){this.emit("evict",{xhrRequest:n})};m.prototype.getRecentBlockingRequestUrl=function(){return this.$NetworkRequestPipeline11};m.prototype.$NetworkRequestPipeline15=function(){var n=this.$NetworkRequestPipeline17(),o={id:n,hasEnded:false,xhrRequest:null,timeout:0};return o};m.prototype.$NetworkRequestPipeline20=function(n,o){var p=this.$NetworkRequestPipeline4.getEstimatedDownloadTime(o),q=this.$NetworkRequestPipeline4.getEstimatedTimeToFirstByte(),r=this.$NetworkRequestPipeline4.getOptimisticTimeToFirstByte();return(p+q-r)*this.$NetworkRequestPipeline2};f.exports=m}),null);
__d("PriorityRequestQueue",["invariant","EventEmitter","Map","Set"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("EventEmitter"));j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$PriorityRequestQueue1=new(c("Map"))(),this.$PriorityRequestQueue2=new(c("Map"))(),this.$PriorityRequestQueue3=function(){},m}k.prototype.dequeue=function(){return this.$PriorityRequestQueue4(Infinity)};k.prototype.setOnItemAdded=function(l){this.$PriorityRequestQueue3=l};k.prototype.$PriorityRequestQueue4=function(l){var m=-Infinity;Array.from(this.$PriorityRequestQueue1.keys()).forEach(function(p){if(p<l)m=Math.max(m,p)});if(m===-Infinity)return null;var n=this.$PriorityRequestQueue1.get(m);n||h(0);var o=this.$PriorityRequestQueue5(n);if(o)return o;return this.$PriorityRequestQueue4(m)};k.prototype.$PriorityRequestQueue5=function(l){var m=l.queues,n=l.lastDequeued;if(!m.size)return null;var o=Array.from(m),p=n?o.findIndex(function(u){return u===n}):-1;for(var q=p+1;q<=p+m.size;q++){var r=q%m.size,s=o[r],t=s.dequeue();if(t){l.lastDequeued=s;return t}}return null};k.prototype.setQueue=function(l,m){var n=this.$PriorityRequestQueue2.get(l);if(n===m)return;if(!n)this.$PriorityRequestQueue3("append");this.removeQueue(l);var o=this.$PriorityRequestQueue1.get(m);if(!o)o={lastDequeued:null,queues:new(c("Set"))()};o.queues.add(l);l.setOnItemAdded(function(p){this.$PriorityRequestQueue6(l,p)}.bind(this));this.$PriorityRequestQueue2.set(l,m);this.$PriorityRequestQueue1.set(m,o)};k.prototype.removeQueue=function(l){var m=this.$PriorityRequestQueue7(l);l.setOnItemAdded(function(){});this.$PriorityRequestQueue2["delete"](l);if(m)m.queues["delete"](l)};k.prototype.$PriorityRequestQueue6=function(l,m){this.$PriorityRequestQueue3(m);if(m==="prepend")this.$PriorityRequestQueue7(l)};k.prototype.$PriorityRequestQueue7=function(l){var m=this.$PriorityRequestQueue2.get(l);if(m!==undefined&&m!==null){var n=this.$PriorityRequestQueue1.get(m);n||h(0);var o=n.queues;if(n.lastDequeued===l){var p=Array.from(o),q=p.findIndex(function(r){return r===l});n.lastDequeued=p[q-1]||null}return n}return null};k.prototype.demandReschedule=function(){this.emit("demand_reschedule")};f.exports=k}),null);
__d("VideoPipelineProvider",["Map","NetworkRequestPipeline","PriorityRequestQueue","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){"use strict";var h=new(c("Map"))();function i(j){var k=h.get(j);if(!k){var l=new(c("PriorityRequestQueue"))(),m=c("VideoPlayerShakaExperiments").requestPipelineSoothingFactor,n=c("VideoPlayerShakaExperiments").requestPipelineMaxConcurrentRequests;if(j==="audio"){m=c("VideoPlayerShakaExperiments").audioRequestPipelineSoothingFactor;n=c("VideoPlayerShakaExperiments").audioRequestPipelineMaxConcurrentRequests}var o=new(c("NetworkRequestPipeline"))(l,{xhrHandleNetworkFailure:c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure,maxConcurrentRequests:n,soothingFactor:m,fixFinishRequest:c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests});k={requestQueue:l,pipeline:o};h.set(j,k)}return k}f.exports={getPriorityRequestQueueAndPipeline:i}}),null);
__d("VideoSegmentRequestQueue",["Map"],(function a(b,c,d,e,f,g){"use strict";function h(){this.$VideoSegmentRequestQueue1=function(){};this.$VideoSegmentRequestQueue2=new(c("Map"))();this.$VideoSegmentRequestQueue3=new(c("Map"))()}h.prototype.dequeue=function(){var i=this.$VideoSegmentRequestQueue3.entries().next().value;if(i){this.$VideoSegmentRequestQueue3["delete"](i[0]);return i[1]||null}i=this.$VideoSegmentRequestQueue2.entries().next().value;if(!i)return null;this.$VideoSegmentRequestQueue2["delete"](i[0]);return i[1]||null};h.prototype.setOnItemAdded=function(i){this.$VideoSegmentRequestQueue1=i};h.prototype.append=function(i,j,k){this.$VideoSegmentRequestQueue4(i,j,k,this.$VideoSegmentRequestQueue2,"append");return this};h.prototype.clearNormalQueue=function(){this.$VideoSegmentRequestQueue2.clear()};h.prototype.changeToTopPri=function(i){var j=this.$VideoSegmentRequestQueue2.get(i);if(j){this.$VideoSegmentRequestQueue2["delete"](i);this.$VideoSegmentRequestQueue3.set(i,j)}};h.prototype.removeTopPriSegment=function(i){var j=this.$VideoSegmentRequestQueue3.get(i);this.$VideoSegmentRequestQueue3["delete"](i);return j?j.xhrRequest:null};h.prototype.isEmpty=function(){return this.$VideoSegmentRequestQueue2.size===0&&this.$VideoSegmentRequestQueue3.size===0};h.prototype.prependTopPri=function(i,j,k){var l=this.$VideoSegmentRequestQueue3;this.$VideoSegmentRequestQueue3=new(c("Map"))();this.$VideoSegmentRequestQueue5(i,j,k,l,this.$VideoSegmentRequestQueue3)};h.prototype.prepend=function(i,j,k){var l=this.$VideoSegmentRequestQueue2;this.$VideoSegmentRequestQueue2=new(c("Map"))();this.$VideoSegmentRequestQueue5(i,j,k,l,this.$VideoSegmentRequestQueue2)};h.prototype.$VideoSegmentRequestQueue5=function(i,j,k,l,m){this.$VideoSegmentRequestQueue4(i,j,k,m,"prepend");l.forEach(function(n,o){var j=n.xhrRequest,k=n.estimatedSize;this.$VideoSegmentRequestQueue6(o,j,k,m)}.bind(this))};h.prototype.$VideoSegmentRequestQueue4=function(i,j,k,l,m){this.$VideoSegmentRequestQueue6(i,j,k,l);this.$VideoSegmentRequestQueue1(m)};h.prototype.$VideoSegmentRequestQueue6=function(i,j,k,l){var m={xhrRequest:j,estimatedSize:k};l.set(i,m)};f.exports=h}),null);
__d("createVideoResponsePromise",["Promise","VideoPlayerShakaError","VideoPlayerShakaExperiments","getXHRRequestHandlerHelper","performanceNow"],(function a(b,c,d,e,f,g){"use strict";var h=window.Promise||c("Promise");c("Promise").resolve();function i(j){var k=void 0,l=j.getURI().toString(),m=j.send;j.send=function(){k=c("performanceNow")();m.call(j)};var n=new h(function(o,p){c("getXHRRequestHandlerHelper")(j).addResponseHandler(function(q){o({response:q,responseTime:c("performanceNow")()-k})}).addAbortHandler(function(q){if(q==="reschedule")return;var r=c("VideoPlayerShakaError").translateError({errorMsg:"Request aborted.",errorType:"abort",errorCode:0},l,"aborted");p(r)}).addErrorHandler(function(q){var r=c("VideoPlayerShakaError").translateError(q,l,"net");p(r)}).addNetworkFailureHandler(function(q){if(c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure){var r=c("VideoPlayerShakaError").translateError(q,l,"net");p(r)}})});return n}f.exports=i}),null);
__d("VideoSegmentRequestPipeline",["Map","NetworkRequestPipeline","SubscriptionsHandler","VideoPipelineProvider","VideoPlayerResourceTimer","VideoPlayerShakaError","VideoPlayerShakaExperiments","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentRequestQueue","createVideoResponsePromise","getXHRRequestHandlerHelper","performanceNow"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){this.$VideoSegmentRequestPipeline1=new(c("Map"))();this.$VideoSegmentRequestPipeline2=new(c("Map"))();this.$VideoSegmentRequestPipeline3=null;this.$VideoSegmentRequestPipeline4=null;this.$VideoSegmentRequestPipeline5=null;this.$VideoSegmentRequestPipeline10=new(c("Map"))();this.$VideoSegmentRequestPipeline11=new(c("Map"))();this.$VideoSegmentRequestPipeline12=null;this.$VideoSegmentRequestPipeline14=0;this.$VideoSegmentRequestPipeline15=new(c("SubscriptionsHandler"))();this.$VideoSegmentRequestPipeline18=function(){if(this.$VideoSegmentRequestPipeline17()===c("VideoPriorityCalculator").getMaxPriority())return;if(c("VideoPlayerShakaExperiments").enableRescheduler&&this.$VideoSegmentRequestPipeline10.size>0)this.$VideoSegmentRequestPipeline22()}.bind(this);this.$VideoSegmentRequestPipeline9=new(c("VideoSegmentRequestQueue"))();if(c("VideoPlayerShakaExperiments").enableGlobalScheduler){var m=c("VideoPipelineProvider").getPriorityRequestQueueAndPipeline(i),n=m.requestQueue,o=m.pipeline;this.$VideoSegmentRequestPipeline12=n;this.$VideoSegmentRequestPipeline13=o}else this.$VideoSegmentRequestPipeline13=new(c("NetworkRequestPipeline"))(this.$VideoSegmentRequestPipeline9,{xhrHandleNetworkFailure:c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure,maxConcurrentRequests:c("VideoPlayerShakaExperiments").requestPipelineMaxConcurrentRequests,soothingFactor:c("VideoPlayerShakaExperiments").requestPipelineSoothingFactor,fixFinishRequest:c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests});var p=this.$VideoSegmentRequestPipeline12;if(p){p.setQueue(this.$VideoSegmentRequestPipeline9,this.$VideoSegmentRequestPipeline17());this.$VideoSegmentRequestPipeline15.addSubscriptions(p.addListener("demand_reschedule",this.$VideoSegmentRequestPipeline18))}this.$VideoSegmentRequestPipeline7=i;this.$VideoSegmentRequestPipeline6=j;this.$VideoSegmentRequestPipeline8=k;this.$VideoSegmentRequestPipeline16=l}h.prototype.enqueue=function(i){var j=c("VideoSegmentInfoHelper").createRequest(i),k=c("VideoSegmentInfoHelper").estimateRequestSize(i),l=c("createVideoResponsePromise")(j),m=j.send;j.send=function(){this.$VideoSegmentRequestPipeline10.set(i,j);this.$VideoSegmentRequestPipeline19(i,j);m.call(j)}.bind(this);this.$VideoSegmentRequestPipeline9.append(i,j,k);this.$VideoSegmentRequestPipeline20();return l};h.prototype.lockRequest=function(i){this.$VideoSegmentRequestPipeline9.changeToTopPri(i);this.$VideoSegmentRequestPipeline11.set(i,{lockedTime:c("performanceNow")(),rescheduleCount:0})};h.prototype.cancelUnlockedRequests=function(){this.$VideoSegmentRequestPipeline9.clearNormalQueue();this.$VideoSegmentRequestPipeline10.forEach(function(i,j){if(!this.$VideoSegmentRequestPipeline11.has(j)){i.abort();this.$VideoSegmentRequestPipeline10["delete"](j)}}.bind(this))};h.prototype.abortLockedRequest=function(i){var j=this.$VideoSegmentRequestPipeline9.removeTopPriSegment(i);if(j)j.abort();j=this.$VideoSegmentRequestPipeline10.get(i);if(j){j.abort();this.$VideoSegmentRequestPipeline21(i)}};h.prototype.$VideoSegmentRequestPipeline21=function(i){this.$VideoSegmentRequestPipeline10["delete"](i);this.$VideoSegmentRequestPipeline11["delete"](i)};h.prototype.unload=function(){if(this.$VideoSegmentRequestPipeline12)this.$VideoSegmentRequestPipeline12.removeQueue(this.$VideoSegmentRequestPipeline9);this.$VideoSegmentRequestPipeline15.release()};h.prototype.setPriority=function(i){if(this.$VideoSegmentRequestPipeline17()===i)return;this.$VideoSegmentRequestPipeline14=i;var j=this.$VideoSegmentRequestPipeline12;if(j){j.setQueue(this.$VideoSegmentRequestPipeline9,i);this.$VideoSegmentRequestPipeline20()}};h.prototype.getResourceTimingEntry=function(i){return this.$VideoSegmentRequestPipeline2.get(i)||null};h.prototype.$VideoSegmentRequestPipeline20=function(){var i=this.$VideoSegmentRequestPipeline12;if(i&&!this.$VideoSegmentRequestPipeline9.isEmpty()&&this.$VideoSegmentRequestPipeline17()>=c("VideoPriorityCalculator").getMaxPriority())i.demandReschedule()};h.prototype.$VideoSegmentRequestPipeline22=function(){Array.from(this.$VideoSegmentRequestPipeline10.values()).forEach(function(i){this.$VideoSegmentRequestPipeline13.evictRequest(i)}.bind(this))};h.prototype.$VideoSegmentRequestPipeline17=function(){return this.$VideoSegmentRequestPipeline14};h.prototype.$VideoSegmentRequestPipeline23=function(i){var j=this.$VideoSegmentRequestPipeline11.get(i)||{},k=j.lockedTime,l=j.rescheduleCount;l=(l||0)+1;this.$VideoSegmentRequestPipeline21(i);this.$VideoSegmentRequestPipeline11.set(i,{lockedTime:k,rescheduleCount:l})};h.prototype.$VideoSegmentRequestPipeline19=function(i,j){var k,l=this,m=j.getURI().toString(),n=this.$VideoSegmentRequestPipeline17(),o=void 0,p=void 0,q=this.$VideoSegmentRequestPipeline13.getRecentBlockingRequestUrl(),r=false;if(q&&q!==this.$VideoSegmentRequestPipeline4)r=true;if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks){p=this.$VideoSegmentRequestPipeline4;this.$VideoSegmentRequestPipeline4=m}else{o=this.$VideoSegmentRequestPipeline3;this.$VideoSegmentRequestPipeline3=j}if(i)(function(){var s=l.$VideoSegmentRequestPipeline24(m,n,r),t=c("performanceNow")(),u=false,v=function v(){if(!c("VideoPlayerShakaExperiments").skipOldHandlerOnFinishedRequests)return false;if(u)return true;u=true;return false};c("getXHRRequestHandlerHelper")(j).addResponseHandler(function(w){if(!v()){var x=c("performanceNow")(),y=c("VideoPlayerResourceTimer").getResourceTimingEntry(m,t,x),z=w.byteLength;if(this.$VideoSegmentRequestPipeline8){var A=y?this.$VideoSegmentRequestPipeline25(y,j,o,p):x-t;this.$VideoSegmentRequestPipeline8.sample(A,z,this.$VideoSegmentRequestPipeline7==="video",{timeToLastByte:A},this.$VideoSegmentRequestPipeline16)}if(s)this.$VideoSegmentRequestPipeline26(i,s,w.byteLength,y,t);this.$VideoSegmentRequestPipeline21(i)}}.bind(l)).addAbortHandler(function(w){if(!v()){var x=c("VideoPlayerShakaError").translateError({errorMsg:"Request aborted.",errorType:"abort",errorCode:0},m,"aborted");if(w==="reschedule")this.$VideoSegmentRequestPipeline23(i);else this.$VideoSegmentRequestPipeline21(i);if(s)s.setError(x).log()}}.bind(l)).addErrorHandler(function(w){if(!v()){var x=c("VideoPlayerShakaError").translateError(w,m,"net");if(s)s.setError(x).log();this.$VideoSegmentRequestPipeline21(i)}}.bind(l)).addNetworkFailureHandler(function(w){if(!v())if(c("VideoPlayerShakaExperiments").xhrHandleNetworkFailure){var x=c("VideoPlayerShakaError").translateError(w,m,"net");if(s)s.setError(x).log();this.$VideoSegmentRequestPipeline21(i)}}.bind(l))})()};h.prototype.$VideoSegmentRequestPipeline24=function(i,j,k){var l=null;if(this.$VideoSegmentRequestPipeline6){l=this.$VideoSegmentRequestPipeline6.getOperationLogger("request").setResource(i).start();l.setPriority(j).setType(this.$VideoSegmentRequestPipeline7||null).setWasDelayed(k).setInitiator("pipeline")}return l};h.prototype.$VideoSegmentRequestPipeline26=function(i,j,k,l,m){var n=this.$VideoSegmentRequestPipeline11.get(i)||{},o=n.lockedTime,p=n.rescheduleCount,q=0;if(o)q=m-o;if(!p)p=0;j.setLength(k);if(l){var r=l.timeToFirstByte,s=l.timeToLastByte,t=l.timeToRequestStart;j.setTimeToFirstByte(Math.round(r)).setTimeToLastByte(Math.round(s)).setTimeToRequestStart(Math.round(t)).setTimeToRequestSent(Math.round(q)).setRescheduleCount(Math.round(p))}j.log()};h.prototype.$VideoSegmentRequestPipeline25=function(i,j,k,l){var m=null;if(k){m=this.$VideoSegmentRequestPipeline1.get(k);if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks)this.$VideoSegmentRequestPipeline1["delete"](k);else this.$VideoSegmentRequestPipeline1["delete"](m)}if(l){m=this.$VideoSegmentRequestPipeline2.get(l);this.$VideoSegmentRequestPipeline2["delete"](l)}if(c("VideoPlayerShakaExperiments").fixingSchedulerXhrRequestLeaks)this.$VideoSegmentRequestPipeline2.set(j.getURI().toString(),i);else this.$VideoSegmentRequestPipeline1.set(j,i);if(m){var n=m.startTime+m.timeToLastByte,o=i.startTime+i.timeToLastByte,p=Math.min(o-n,i.timeToLastByte);return Math.max(i.timeToLastByte-i.timeToFirstByte,p)}return i.timeToLastByte};f.exports=h}),null);
__d("SegmentRequestManager",["invariant","BinarySearch","Map","SegmentsUpdateHelper","TrackedPromise","VideoPriorityCalculator","VideoSegmentInfoHelper","VideoSegmentPromiseBuffer","VideoSegmentRequestPipeline"],(function a(b,c,d,e,f,g,h){"use strict";var i=.1,j=3;function k(l,m,n,o,p){this.$SegmentRequestManager1=new(c("Map"))();this.$SegmentRequestManager2=new(c("Map"))();this.$SegmentRequestManager3=0;this.$SegmentRequestManager4=null;this.$SegmentRequestManager6=[];this.$SegmentRequestManager7=new(c("VideoSegmentPromiseBuffer"))();this.$SegmentRequestManager8=false;this.$SegmentRequestManager10=0;this.$SegmentRequestManager5=new(c("VideoSegmentRequestPipeline"))(l,n,o,p);this.$SegmentRequestManager11=m||c("VideoPriorityCalculator").calculate}k.prototype.updateSegmentsByShakaReferences=function(l,m){new(c("SegmentsUpdateHelper"))(this.$SegmentRequestManager2,this.$SegmentRequestManager1).updateSegments(l,m)};k.prototype.updateSegments=function(l,m){var n=this.getSegments(l);m.forEach(function(o){var p=c("VideoSegmentInfoHelper").getRequestCacheKey(o.requestInfo);if(!this.$SegmentRequestManager2.has(p)){this.$SegmentRequestManager2.set(p,o);this.$SegmentRequestManager12(n,o)}}.bind(this));this.$SegmentRequestManager1.set(l,n)};k.prototype.getSegments=function(l){var m=this.$SegmentRequestManager1.get(l);return m||[]};k.prototype.hasSegment=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l.requestInfo);return this.$SegmentRequestManager2.has(m)};k.prototype.updatePriorityWithNewPlayhead=function(l){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.playhead=l;this.$SegmentRequestManager13();return this};k.prototype.updatePriorityWithNewPlayingState=function(l){if(this.$SegmentRequestManager9)this.$SegmentRequestManager9.isPlaying=l;this.$SegmentRequestManager13();return this};k.prototype.updatePriorityWithNewAdjustment=function(l){if(l===this.$SegmentRequestManager10)return this;l<=0||h(0);this.$SegmentRequestManager10=l;this.$SegmentRequestManager13();return this};k.prototype.updatePlayerState=function(l,m){var n=this.$SegmentRequestManager1.get(l);this.$SegmentRequestManager9=m;if(!n)return this;var o=this.$SegmentRequestManager4;this.$SegmentRequestManager4=l;if(this.$SegmentRequestManager8)return this;this.$SegmentRequestManager13();var p=this.$SegmentRequestManager14(m,n);if(o!==l){this.$SegmentRequestManager15();this.$SegmentRequestManager16(p);return this}var q=[];if(this.$SegmentRequestManager7.hasOtherPendingSegments(p)){this.$SegmentRequestManager15();q=p}else{q=p.filter(function(r){return!this.$SegmentRequestManager7.hasSegmentPromise(r)}.bind(this));this.$SegmentRequestManager7.removeSegmentPromisesOlderThan(p[0])}this.$SegmentRequestManager16(q);return this};k.prototype.getPromise=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l),n=this.$SegmentRequestManager2.get(m);if(!n)throw new Error("the given request info is not found it segments cache ");var o=this.$SegmentRequestManager7.getSegmentPromise(n),p=void 0;if(o&&(!o.isPending()||this.$SegmentRequestManager7.isFirstPendingSegment(n)))p=o.getPromise();else{this.$SegmentRequestManager15();p=this.$SegmentRequestManager5.enqueue(n);o=new(c("TrackedPromise"))(p);this.$SegmentRequestManager7.appendSegmentPromise(n,o)}this.$SegmentRequestManager5.lockRequest(n);return p};k.prototype.getResourceTimingEntry=function(l){return this.$SegmentRequestManager5.getResourceTimingEntry(l)};k.prototype.$SegmentRequestManager12=function(l,m){var n=Number.POSITIVE_INFINITY;for(var o=0;o<=l.length;o++){var p=l.length-o,q=p>=1?l[p-1].startTime:Number.NEGATIVE_INFINITY;if(q<=m.startTime&&m.startTime<n){p===l.length?l.push(m):l.splice(p,0,m);return}n=q}};k.prototype.$SegmentRequestManager13=function(){if(!this.$SegmentRequestManager9)return;var l=this.$SegmentRequestManager11(this.$SegmentRequestManager9);l+=this.$SegmentRequestManager10;this.$SegmentRequestManager5.setPriority(l)};k.prototype.$SegmentRequestManager15=function(){this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager7.clearAllSegmentPromises()};k.prototype.$SegmentRequestManager16=function(l){for(var m=l,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}var q=p;if(c("VideoSegmentInfoHelper").isPrefetchedRequest(q))return;var r=this.$SegmentRequestManager5.enqueue(q);this.$SegmentRequestManager7.appendSegmentPromise(q,new(c("TrackedPromise"))(r))}};k.prototype.abortRequest=function(l){var m=c("VideoSegmentInfoHelper").getRequestCacheKey(l),n=this.$SegmentRequestManager2.get(m);if(n){this.$SegmentRequestManager5.abortLockedRequest(n);this.$SegmentRequestManager7.removeSegmentPromise(n)}};k.prototype.disable=function(){if(this.$SegmentRequestManager8)return;this.$SegmentRequestManager5.cancelUnlockedRequests();this.$SegmentRequestManager5.unload();this.$SegmentRequestManager8=true};k.prototype.enable=function(){this.$SegmentRequestManager8=false};k.prototype.isDisabled=function(){return this.$SegmentRequestManager8};k.prototype.$SegmentRequestManager14=function(l,m){var n=l.playhead,o=l.bufferEnd,p=l.bufferingGoal,q=Math.max(o,n),r=[],s=this.$SegmentRequestManager17(q,m);for(var t=Math.max(s,0);t<m.length;t++){var u=m[t];if(u.startTime>n+p)break;r.push(u)}return r};k.prototype.$SegmentRequestManager17=function(l,m){return c("BinarySearch").leastUpperBound(function(n){var o=this.$SegmentRequestManager18(m[n].startTime),p=this.$SegmentRequestManager18(m[n].endTime);l=this.$SegmentRequestManager18(l);if(o<=l&&p>l)return 0;return o-l}.bind(this),0,0,m.length,function(n,o){return n-o})};k.prototype.$SegmentRequestManager18=function(l){return+l.toFixed(j)||0};f.exports=k}),null);
__d("SingleSegmentProvider",[],(function a(b,c,d,e,f,g){"use strict";h.prototype.getFetchRange=function(i){var j=i.startByte,k=i.endByte;return{startByte:j||0,endByte:k||0}};function h(){}f.exports=h}),null);
__d("VideoPlayerLocalBandwidthEstimator",["guid","Banzai","VideoPlayerAbrEvaluation","VideoPlayerShakaExperiments","SubscriptionsHandler","EventListener","EventEmitter"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this);this.$VideoPlayerLocalBandwidthEstimator2=k;this.$VideoPlayerLocalBandwidthEstimator1=l;this.$VideoPlayerLocalBandwidthEstimator3=[];this.$VideoPlayerLocalBandwidthEstimator4=null;this.$VideoPlayerLocalBandwidthEstimator5=c("guid")();this.$VideoPlayerLocalBandwidthEstimator8=new(c("SubscriptionsHandler"))();this.$VideoPlayerLocalBandwidthEstimator8.addSubscriptions(c("EventListener").listen(this.$VideoPlayerLocalBandwidthEstimator1,"bandwidth",function(m){return this.emit("bandwidth",m)}.bind(this)))}j.prototype.setRepresentationID=function(k){"use strict";this.$VideoPlayerLocalBandwidthEstimator4=k};j.prototype.sample=function(k,l,m,n,o){"use strict";if(m&&this.$VideoPlayerLocalBandwidthEstimator4)this.$VideoPlayerLocalBandwidthEstimator9(k,l,this.$VideoPlayerLocalBandwidthEstimator4,this.$VideoPlayerLocalBandwidthEstimator2.getVideoTracks());this.$VideoPlayerLocalBandwidthEstimator1.sample(k,l,m,n,o)};j.prototype.supportsCaching=function(){"use strict";return this.$VideoPlayerLocalBandwidthEstimator1.supportsCaching()};j.prototype.getBandwidth=function(){"use strict";return this.$VideoPlayerLocalBandwidthEstimator1.getBandwidth()};j.prototype.setResolutionConstraint=function(k,l){"use strict";this.$VideoPlayerLocalBandwidthEstimator6=k;this.$VideoPlayerLocalBandwidthEstimator7=l};j.prototype.$VideoPlayerLocalBandwidthEstimator9=function(k,l,m,n){"use strict";var o=8e3*l/k,p=n.filter(function(w){return w.width<=this.$VideoPlayerLocalBandwidthEstimator6||w.height<=this.$VideoPlayerLocalBandwidthEstimator7}.bind(this)),q=this.$VideoPlayerLocalBandwidthEstimator10(o,n),r=this.$VideoPlayerLocalBandwidthEstimator10(o,p),s=n.find(function(w){return w.streamInfoID===m});if(s){if(c("VideoPlayerShakaExperiments").videosAbrDebuggerStorage)c("Banzai").post("video_player_abr",{id:this.$VideoPlayerLocalBandwidthEstimator5,bandwidth:o,chosenBandwidth:s.bandwidth});var t=s.id,u=this.$VideoPlayerLocalBandwidthEstimator11(q,t),v=this.$VideoPlayerLocalBandwidthEstimator11(r,t);if(u!==v)if(u===c("VideoPlayerAbrEvaluation").CONSERVATIVE&&v===c("VideoPlayerAbrEvaluation").IDEAL)u=c("VideoPlayerAbrEvaluation").CONSERVATIVE_RESOLUTION_CONSTRAINED;this.$VideoPlayerLocalBandwidthEstimator3.push(u)}};j.prototype.$VideoPlayerLocalBandwidthEstimator10=function(k,l){"use strict";var m=0;for(var n=0;n<l.length;n++){if(k<=l[n].bandwidth)break;m=l[n].id}return m};j.prototype.$VideoPlayerLocalBandwidthEstimator11=function(k,l){"use strict";return k===l?c("VideoPlayerAbrEvaluation").IDEAL:k>l?c("VideoPlayerAbrEvaluation").CONSERVATIVE:c("VideoPlayerAbrEvaluation").AGGRESSIVE};j.prototype.flushABREvaluationSet=function(){"use strict";var k=this.$VideoPlayerLocalBandwidthEstimator3;this.$VideoPlayerLocalBandwidthEstimator3=[];return k};f.exports=j}),null);
__d("ExtendableVideoPlayerShakaPerformanceTypedLogger",["VideoPlayerShakaPerformanceTypedLogger"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("VideoPlayerShakaPerformanceTypedLogger"));i=h&&h.prototype;j.prototype.setState=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1=k;i.setState.call(this,k);return this};j.prototype.getState=function(){return this.$ExtendableVideoPlayerShakaPerformanceTypedLogger1};j.prototype.setSequentialID=function(k){this.$ExtendableVideoPlayerShakaPerformanceTypedLogger2=k;i.setSequentialID.call(this,k);return this};j.prototype.setParentLogger=function(k){this.setParentID(k.$ExtendableVideoPlayerShakaPerformanceTypedLogger2);return this};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("VideoPlayerArtilleryOperationMarker",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){this.$VideoPlayerArtilleryOperationMarker2=i;this.$VideoPlayerArtilleryOperationMarker3=j;this.$VideoPlayerArtilleryOperationMarker4=k;this.$VideoPlayerArtilleryOperationMarker5=l;this.$VideoPlayerArtilleryOperationMarker6=false}h.prototype.markOperationStart=function(){return this.$VideoPlayerArtilleryOperationMarker7("Starting")};h.prototype.markOperationEnd=function(){return this.$VideoPlayerArtilleryOperationMarker7("Ending")};h.prototype.$VideoPlayerArtilleryOperationMarker7=function(i){var j=this.$VideoPlayerArtilleryOperationMarker4();if(j)j.inform(i+" "+this.$VideoPlayerArtilleryOperationMarker2+" #"+this.$VideoPlayerArtilleryOperationMarker3,{pointGroup:this.$VideoPlayerArtilleryOperationMarker5.getGroupName(this.$VideoPlayerArtilleryOperationMarker2,this.$VideoPlayerArtilleryOperationMarker1),isPointOfInterest:true,type:null}).addStringAnnotation("resource",this.$VideoPlayerArtilleryOperationMarker1||"").addStringAnnotation("wasPrefetchCacheHit",this.$VideoPlayerArtilleryOperationMarker6.toString());return this};h.prototype.setResource=function(i){this.$VideoPlayerArtilleryOperationMarker1=i;return this};h.prototype.setWasPrefetchCacheHit=function(i){this.$VideoPlayerArtilleryOperationMarker6=i;return this};f.exports=h}),null);
__d("VideoPlayerArtilleryPointGrouper",["Map"],(function a(b,c,d,e,f,g){function h(){"use strict";this.$VideoPlayerArtilleryPointGrouper1=new(c("Map"))();this.$VideoPlayerArtilleryPointGrouper2=new(c("Map"))()}h.prototype.getGroupName=function(i,j){"use strict";if(!j){switch(i){case"start_streams":i="source_attach";break}return i}var k=this.$VideoPlayerArtilleryPointGrouper1.get(j);if(k)return k;var l=void 0;if(j.indexOf("-init.m4v")!==-1)l="-init.m4v";else if(j.indexOf("-init.m4a")!==-1)l="-init.m4a";else if(j.indexOf(".mpd")!==-1)return"source_load";else if(j.indexOf(".m4v")!==-1)l=".m4v";else if(j.indexOf(".m4a")!==-1)l=".m4a";else l="unknown";var m=this.$VideoPlayerArtilleryPointGrouper2.get(l)+1||1;this.$VideoPlayerArtilleryPointGrouper2.set(l,m);k=l+" #"+m;this.$VideoPlayerArtilleryPointGrouper1.set(j,k);return k};f.exports=h}),null);
__d("VideoPlayerArtilleryTrace",["TimeSliceInteraction","UserAgentData","VideoPlayerArtilleryOperationMarker","VideoPlayerArtilleryPointGrouper"],(function a(b,c,d,e,f,g){"use strict";var h=3e4,i=3e3;function j(k,l){this.$VideoPlayerArtilleryTrace13=function(){var m=this.$VideoPlayerArtilleryTrace2;if(m){var n=m.stallTrace,o=m.hasStalls,p=m.stallTraceTimeout;o?n.finish():n.disable();clearTimeout(p)}this.$VideoPlayerArtilleryTrace2=null}.bind(this);this.$VideoPlayerArtilleryTrace17=function(){return this.$VideoPlayerArtilleryTrace1}.bind(this);this.$VideoPlayerArtilleryTrace18=function(){var m=this.$VideoPlayerArtilleryTrace2;return m?m.stallTrace:null}.bind(this);this.$VideoPlayerArtilleryTrace4=l.videoID;this.$VideoPlayerArtilleryTrace5=l.video;this.$VideoPlayerArtilleryTrace6=k;this.$VideoPlayerArtilleryTrace7=l.isLive;this.$VideoPlayerArtilleryTrace9=l.playerOrigin;this.$VideoPlayerArtilleryTrace10=l.playerSuborigin;this.$VideoPlayerArtilleryTrace8=0;this.$VideoPlayerArtilleryTrace11=new(c("VideoPlayerArtilleryPointGrouper"))()}j.prototype.updateBufferAhead=function(k){var l=this.$VideoPlayerArtilleryTrace2;if(!l&&k<=i)this.$VideoPlayerArtilleryTrace2={stallTrace:this.$VideoPlayerArtilleryTrace12(c("TimeSliceInteraction").create("video_stall")),hasStalls:false,stallTraceTimeout:setTimeout(this.$VideoPlayerArtilleryTrace13,h)};else if(k>i)this.$VideoPlayerArtilleryTrace13()};j.prototype.enterState=function(k){switch(k){case"loading":this.$VideoPlayerArtilleryTrace14();break;case"playing":this.$VideoPlayerArtilleryTrace15();break;default:this.$VideoPlayerArtilleryTrace16(k);break}return this};j.prototype.$VideoPlayerArtilleryTrace16=function(k){var l=this.$VideoPlayerArtilleryTrace1;if(l)l.inform("State: "+k)};j.prototype.getMarkers=function(k){var l=[],m=(++this.$VideoPlayerArtilleryTrace8).toString();if(this.$VideoPlayerArtilleryTrace1)l.push(new(c("VideoPlayerArtilleryOperationMarker"))(k,m,this.$VideoPlayerArtilleryTrace17,this.$VideoPlayerArtilleryTrace11));var n=this.$VideoPlayerArtilleryTrace2;if(n){if(k==="buffering")n.hasStalls=true;l.push(new(c("VideoPlayerArtilleryOperationMarker"))(k,m,this.$VideoPlayerArtilleryTrace18,this.$VideoPlayerArtilleryTrace11))}return l};j.prototype.$VideoPlayerArtilleryTrace14=function(){var k=this.$VideoPlayerArtilleryTrace12(c("TimeSliceInteraction").create("video_psr"));this.$VideoPlayerArtilleryTrace1=k;this.$VideoPlayerArtilleryTrace16("loading")};j.prototype.$VideoPlayerArtilleryTrace15=function(){this.$VideoPlayerArtilleryTrace16("playing");var k=this.$VideoPlayerArtilleryTrace1;if(k){k.finish();this.$VideoPlayerArtilleryTrace1=null}};j.prototype.$VideoPlayerArtilleryTrace12=function(k){k.trace().addStringAnnotation("videoID",this.$VideoPlayerArtilleryTrace4).addStringAnnotation("sessionID",this.$VideoPlayerArtilleryTrace6).addStringAnnotation("browserName",c("UserAgentData").browserName).addStringAnnotation("browserVersion",c("UserAgentData").browserVersion).addStringAnnotation("isLive",this.$VideoPlayerArtilleryTrace7.toString()).addStringAnnotation("playerOrigin",this.$VideoPlayerArtilleryTrace9||"").addStringAnnotation("playerSuborigin",this.$VideoPlayerArtilleryTrace10||"");return k};f.exports=j}),null);
__d("VideoPlayerShakaPerformanceLogger",["ExtendableVideoPlayerShakaPerformanceTypedLogger","ScriptPath","VideoPlayerArtilleryTrace","VideoPlayerShakaPerformanceLoggerConfig"],(function a(b,c,d,e,f,g){"use strict";h.isEnabled=function(){return c("VideoPlayerShakaPerformanceLoggerConfig").isSampled};function h(i){this.$VideoPlayerShakaPerformanceLogger2=i.videoID;this.$VideoPlayerShakaPerformanceLogger4=i.video;this.$VideoPlayerShakaPerformanceLogger1=i.uniqueID;this.$VideoPlayerShakaPerformanceLogger3=0;this.$VideoPlayerShakaPerformanceLogger5=i.representationId;this.$VideoPlayerShakaPerformanceLogger9=i.isLive;this.$VideoPlayerShakaPerformanceLogger8=null;this.$VideoPlayerShakaPerformanceLogger10=i.accessToken;this.$VideoPlayerShakaPerformanceLogger12=i.playerOrigin;this.$VideoPlayerShakaPerformanceLogger13=i.playerSuborigin;this.$VideoPlayerShakaPerformanceLogger11=new(c("VideoPlayerArtilleryTrace"))(this.$VideoPlayerShakaPerformanceLogger1,i)}h.prototype.$VideoPlayerShakaPerformanceLogger14=function(i){var j=this.$VideoPlayerShakaPerformanceLogger4.buffered;if(j.length>0){var k=j.length-1;i=i.setLastBufferedStart(Math.round(j.start(k)*1e3)).setLastBufferedEnd(Math.round(j.end(k)*1e3));this.$VideoPlayerShakaPerformanceLogger11.updateBufferAhead((j.end(k)-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1e3)}var l=[];for(var m=0;m<j.length-1;m++){var n=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.start(m)*1e3),o=Math.round(this.$VideoPlayerShakaPerformanceLogger4.buffered.end(m)*1e3);l.push([n,o])}if(l&&l.length)i=i.setAdditionalBufferedRanges(JSON.stringify(l));return i};h.prototype.getLiveheadDelta=function(){return this.$VideoPlayerShakaPerformanceLogger8?Math.round((this.$VideoPlayerShakaPerformanceLogger8-this.$VideoPlayerShakaPerformanceLogger4.currentTime)*1e3):null};h.prototype.getVideoID=function(){return this.$VideoPlayerShakaPerformanceLogger2};h.prototype.getEventLogger=function(event){var i=Date.now(),j=new(c("ExtendableVideoPlayerShakaPerformanceTypedLogger"))(),k=this.$VideoPlayerShakaPerformanceLogger4.currentTime,l=this.$VideoPlayerShakaPerformanceLogger4.duration;this.$VideoPlayerShakaPerformanceLogger14(j).setEvent(event).setVideoID(this.$VideoPlayerShakaPerformanceLogger2).setPlayerOriginCallerSpecified(this.$VideoPlayerShakaPerformanceLogger12).setScriptPath(c("ScriptPath").getScriptPath()).setPlayerSuborigin(this.$VideoPlayerShakaPerformanceLogger13).setRepresentationID(this.$VideoPlayerShakaPerformanceLogger5).setPlayhead(Math.round(k*1e3)).setVideoDuration(Math.round(l*1e3)).setIsLive(this.$VideoPlayerShakaPerformanceLogger9).setSession(this.$VideoPlayerShakaPerformanceLogger1).setSequentialID(this.$VideoPlayerShakaPerformanceLogger3++).setState(this.$VideoPlayerShakaPerformanceLogger6).setLastPlayingEventTime(this.$VideoPlayerShakaPerformanceLogger7).setLiveheadDelta(this.getLiveheadDelta()).setPushed(0).setResult("success").setAccessToken(this.$VideoPlayerShakaPerformanceLogger10).setClientTimeBegin(i).setClientTimeEnd(i);var m=j.setState;j.setState=function(o){if(o!==this.$VideoPlayerShakaPerformanceLogger6&&o==="playing")this.$VideoPlayerShakaPerformanceLogger7=Date.now();else if(o!=="playing")this.$VideoPlayerShakaPerformanceLogger7=null;this.$VideoPlayerShakaPerformanceLogger6=o;this.$VideoPlayerShakaPerformanceLogger11.enterState(o);return m.call(j,o)}.bind(this);j.updateState=function(o){if(j.getState()==this.$VideoPlayerShakaPerformanceLogger6){this.$VideoPlayerShakaPerformanceLogger11.enterState(o);return j.setState(o)}return j}.bind(this);var n=j.setError;j.setError=function(o){if(typeof o==="object"){if(o.type==="aborted"||o.type==="delay")this.setResult("aborted");else{this.setResult("failed");n.call(this,o.type)}this.setCode(o.status)}else n.call(this,o);return this};return j};h.prototype.getArtilleryMarkers=function(i){return this.$VideoPlayerShakaPerformanceLogger11.getMarkers(i)};h.prototype.getOperationLogger=function(i){var j=this.getEventLogger(i),k=this.getArtilleryMarkers(i),l=j.setResource;j.setResource=function(n){k.forEach(function(o){return o.setResource(n)});return l.call(j,n)};var m=j.log;j.log=function(){this.setClientTimeEnd(Date.now());k.forEach(function(n){return n.markOperationEnd()});return m.call(this)};j.start=function(){k.forEach(function(n){return n.markOperationStart()});return j};j.setWasPrefetchCacheHit=function(n){k.forEach(function(o){return o.setWasPrefetchCacheHit(n)});return j};j.setLiveheadPosition=function(n){this.$VideoPlayerShakaPerformanceLogger8=n;j.setLiveheadDelta(this.getLiveheadDelta());return j}.bind(this);return j};h.prototype.setRepresentationID=function(i){this.$VideoPlayerShakaPerformanceLogger5=i};f.exports=h}),null);
__d("FetchStreamStateTracker",["invariant"],(function a(b,c,d,e,f,g,h){"use strict";i.prototype.setNextRequestInfo=function(j){this.$FetchStreamStateTracker1=this.$FetchStreamStateTracker2;this.$FetchStreamStateTracker2=j};i.prototype.setFetchRange=function(j){this.$FetchStreamStateTracker3=j};i.prototype.isNextRequestContinuous=function(){this.$FetchStreamStateTracker2||h(0);if(!this.$FetchStreamStateTracker1)return false;if(this.$FetchStreamStateTracker1.baseUrl!==this.$FetchStreamStateTracker2.baseUrl||this.$FetchStreamStateTracker1.endByte+1!==this.$FetchStreamStateTracker2.startByte)return false;return true};i.prototype.isNextRequestInRange=function(){this.$FetchStreamStateTracker2||h(0);if(!this.$FetchStreamStateTracker3)return false;return(this.$FetchStreamStateTracker2.endByte||0)<=this.$FetchStreamStateTracker3.endByte};function i(){}f.exports=i}),null);
__d("MaybeNativePromise",["Promise"],(function a(b,c,d,e,f,g){"use strict";var h=b.Promise||c("Promise");c("Promise").resolve();f.exports=h}),null);
__d("DeferredBuffer",["invariant","Deferred","MaybeNativePromise"],(function a(b,c,d,e,f,g,h){"use strict";function i(){this.$DeferredBuffer1=[];this.$DeferredBuffer2=false}i.prototype.produce=function(j){this.$DeferredBuffer1.push(j);if(this.$DeferredBuffer3)this.$DeferredBuffer3.resolve()};i.prototype.consume=function(j){if(this.$DeferredBuffer2)throw new Error("A buffer can only be consumed by one client at a time");this.$DeferredBuffer2=true;var k=c("MaybeNativePromise").resolve();if(!this.$DeferredBuffer1.length){this.$DeferredBuffer3=new(c("Deferred"))();k=this.$DeferredBuffer3.getPromise()}return k.then(function(){this.$DeferredBuffer1.length>0||h(0);this.$DeferredBuffer3=null;this.$DeferredBuffer2=false;return this.$DeferredBuffer4(j)}.bind(this))};i.prototype.$DeferredBuffer4=function(j){if(this.$DeferredBuffer1.length===0)return new Uint8Array([]);var k=this.$DeferredBuffer1[0];if(j!==undefined&&k.length>j){var l=k.slice(j);k=k.slice(0,j);this.$DeferredBuffer1[0]=l}else this.$DeferredBuffer1.shift();return k};i.prototype.isEmpty=function(){return this.$DeferredBuffer1.length===0};f.exports=i}),null);
__d("ReadableStream",[],(function a(b,c,d,e,f,g){f.exports=self.ReadableStream}),null);
__d("WritableStream",[],(function a(b,c,d,e,f,g){f.exports=self.WritableStream}),null);
__d("pipeErrorTo",[],(function a(b,c,d,e,f,g){"use strict";function h(i,j){try{i.error(j)}catch(k){}}f.exports=h}),null);
__d("FixedSizeTransform",["invariant","Deferred","DeferredBuffer","MaybeNativePromise","ReadableStream","WritableStream","pipeErrorTo"],(function a(b,c,d,e,f,g,h){"use strict";function i(){this.$FixedSizeTransform2=new(c("DeferredBuffer"))();this.$FixedSizeTransform3=0;this.$FixedSizeTransform4=c("MaybeNativePromise").resolve();this.$FixedSizeTransform7=[]}i.prototype.cancel=function(j){this.$FixedSizeTransform9(j);if(this.$FixedSizeTransform6)c("pipeErrorTo")(this.$FixedSizeTransform6,j)};i.prototype.$FixedSizeTransform9=function(j){this.$FixedSizeTransform8=j;if(this.$FixedSizeTransform5)this.$FixedSizeTransform5.reject(this.$FixedSizeTransform8)};i.prototype.getSink=function(){if(!this.$FixedSizeTransform1)this.$FixedSizeTransform1=new(c("WritableStream"))({start:function(j){this.$FixedSizeTransform6=j}.bind(this),write:function(j){j instanceof Uint8Array||h(0);this.$FixedSizeTransform2.produce(j)}.bind(this),close:function(){this.$FixedSizeTransform1=null}.bind(this),abort:function(j){this.$FixedSizeTransform9(j);this.$FixedSizeTransform7.forEach(function(k){var l=j;c("pipeErrorTo")(k,l)})}.bind(this)});return this.$FixedSizeTransform1};i.prototype.getNextFixedSizeStream=function(j){if(this.$FixedSizeTransform8)return c("MaybeNativePromise").reject(this.$FixedSizeTransform8);this.$FixedSizeTransform5=new(c("Deferred"))(c("MaybeNativePromise"));var k=this.$FixedSizeTransform5.getPromise(),l=this.$FixedSizeTransform4;this.$FixedSizeTransform4=k;return l.then(function(){return new(c("ReadableStream"))({start:function(m){this.$FixedSizeTransform7.push(m)}.bind(this),pull:function(m){if(this.$FixedSizeTransform3===j){m.close();this.$FixedSizeTransform3=0;this.$FixedSizeTransform5.resolve();return c("MaybeNativePromise").resolve()}var n=j-this.$FixedSizeTransform3;return this.$FixedSizeTransform2.consume(n).then(function(o){m.enqueue(o);this.$FixedSizeTransform3+=o.length}.bind(this))}.bind(this),cancel:function(m){this.$FixedSizeTransform9(m);c("pipeErrorTo")(this.$FixedSizeTransform6,m)}.bind(this)})}.bind(this))};f.exports=i}),null);
__d("NetworkErrorTransformStream",["ReadableStream","WritableStream","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";h.prototype.$NetworkErrorTransformStream3=function(i){this.$NetworkErrorTransformStream1.enqueue(i)};function h(){this.writable=new(c("WritableStream"))({start:function(i){this.$NetworkErrorTransformStream2=i}.bind(this),write:function(i){this.$NetworkErrorTransformStream3(i)}.bind(this),close:function(){this.$NetworkErrorTransformStream1.close()}.bind(this),abort:function(i){var j=i;if(i instanceof TypeError)j={type:"net",status:0,message:"Network failure."};c("pipeErrorTo")(this.$NetworkErrorTransformStream1,j)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(i){this.$NetworkErrorTransformStream1=i}.bind(this),cancel:function(i){c("pipeErrorTo")(this.$NetworkErrorTransformStream2,i)}.bind(this)})}f.exports=h}),null);
__d("PausableRangeStream",["MaybeNativePromise","DeferredBuffer","ReadableStream","WritableStream","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";function h(){return new Error("Upstream has an inconsistent range")}function i(j,k){this.$PausableRangeStream3=new(c("DeferredBuffer"))();this.$PausableRangeStream7=0;this.$PausableRangeStream8=0;this.$PausableRangeStream1=j;this.$PausableRangeStream2=k;this.$PausableRangeStream6=new(c("ReadableStream"))({start:function(l){this.$PausableRangeStream11=l}.bind(this),pull:function(l){var m=this.$PausableRangeStream1.endByte-this.$PausableRangeStream1.startByte+1;if(this.$PausableRangeStream7===m&&this.$PausableRangeStream3.isEmpty()){l.close();return c("MaybeNativePromise").resolve()}return this.$PausableRangeStream3.consume().then(function(n){this.$PausableRangeStream7+=n.length;if(this.$PausableRangeStream7>m)c("pipeErrorTo")(this.$PausableRangeStream11,h());l.enqueue(n)}.bind(this))}.bind(this),cancel:function(l){c("pipeErrorTo")(this.$PausableRangeStream10,l)}.bind(this)});this.$PausableRangeStream12()}i.prototype.$PausableRangeStream12=function(){this.$PausableRangeStream4=new(c("WritableStream"))({start:function(j){this.$PausableRangeStream10=j}.bind(this),write:function(j){this.$PausableRangeStream3.produce(j);this.$PausableRangeStream8+=j.length}.bind(this),close:function(){if(this.$PausableRangeStream8!==this.$PausableRangeStream1.endByte-this.$PausableRangeStream1.startByte+1)c("pipeErrorTo")(this.$PausableRangeStream11,h())}.bind(this),abort:function(j){c("pipeErrorTo")(this.$PausableRangeStream11,j)}.bind(this)})};i.prototype.getStream=function(){return this.$PausableRangeStream6};i.prototype.startStream=function(){var j=this.$PausableRangeStream1;j.startByte+=this.$PausableRangeStream8;return this.$PausableRangeStream2.startStream(j).then(function(k){this.$PausableRangeStream5=k;this.$PausableRangeStream9=k.pipeTo(this.$PausableRangeStream4)}.bind(this))};i.prototype.pauseStream=function(){c("pipeErrorTo")(this.$PausableRangeStream10,"streamPaused");this.$PausableRangeStream12();return c("MaybeNativePromise").resolve()};f.exports=i}),null);
__d("StreamBandwidthReporter",["EventEmitter","ReadableStream","WritableStream","performanceNow","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;j.prototype.$StreamBandwidthReporter5=function(k){this.$StreamBandwidthReporter3.enqueue(k)};function j(){i.constructor.call(this);this.$StreamBandwidthReporter1=0;this.writable=new(c("WritableStream"))({start:function(k){this.$StreamBandwidthReporter2=c("performanceNow")();this.$StreamBandwidthReporter4=k}.bind(this),write:function(k){if(k.length!=undefined)this.$StreamBandwidthReporter1+=k.length;this.emit("bandwidthUpdate",{bytesRead:this.$StreamBandwidthReporter1,timeTaken:c("performanceNow")()-this.$StreamBandwidthReporter2});this.$StreamBandwidthReporter5(k)}.bind(this),close:function(){this.$StreamBandwidthReporter3.close()}.bind(this),abort:function(k){c("pipeErrorTo")(this.$StreamBandwidthReporter3,k)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(k){this.$StreamBandwidthReporter3=k}.bind(this),cancel:function(k){c("pipeErrorTo")(this.$StreamBandwidthReporter4,k)}.bind(this)})}f.exports=j}),null);
__d("StreamFetchRequestLogger",["ReadableStream","VideoPlayerResourceTimer","WritableStream","performanceNow","pipeErrorTo"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){this.$StreamFetchRequestLogger3=k;this.$StreamFetchRequestLogger2=l;this.$StreamFetchRequestLogger1=i;this.$StreamFetchRequestLogger4=j;this.writable=new(c("WritableStream"))({start:function(m){this.$StreamFetchRequestLogger8();this.$StreamFetchRequestLogger7=m}.bind(this),write:function(m){this.$StreamFetchRequestLogger9(m)}.bind(this),close:function(){this.$StreamFetchRequestLogger6.close();this.$StreamFetchRequestLogger10()}.bind(this),abort:function(m){c("pipeErrorTo")(this.$StreamFetchRequestLogger6,m);this.$StreamFetchRequestLogger11(m)}.bind(this)});this.readable=new(c("ReadableStream"))({start:function(m){this.$StreamFetchRequestLogger6=m}.bind(this),cancel:function(m){c("pipeErrorTo")(this.$StreamFetchRequestLogger7,m);this.$StreamFetchRequestLogger11({name:"abort",type:"aborted",status:0,message:"Request aborted.",url:this.$StreamFetchRequestLogger3})}.bind(this)})}h.prototype.$StreamFetchRequestLogger8=function(){this.$StreamFetchRequestLogger5=this.$StreamFetchRequestLogger1.getOperationLogger("fetch_stream").setResource(this.$StreamFetchRequestLogger3).start();this.$StreamFetchRequestLogger5.setType(this.$StreamFetchRequestLogger4)};h.prototype.$StreamFetchRequestLogger11=function(i){this.$StreamFetchRequestLogger5.setError(i).log()};h.prototype.$StreamFetchRequestLogger10=function(){var i=c("VideoPlayerResourceTimer").getResourceTimingEntry(this.$StreamFetchRequestLogger3,this.$StreamFetchRequestLogger2,c("performanceNow")());if(i){var j=i.timeToFirstByte,k=i.timeToLastByte,l=i.timeToRequestStart,m=i.transferSize;this.$StreamFetchRequestLogger5.setTimeToFirstByte(Math.round(j)).setTimeToLastByte(Math.round(k)).setTimeToRequestStart(Math.round(l)).setLength(m)}this.$StreamFetchRequestLogger5.log()};h.prototype.$StreamFetchRequestLogger9=function(i){this.$StreamFetchRequestLogger6.enqueue(i)};f.exports=h}),null);
__d("createErrorStream",["ReadableStream"],(function a(b,c,d,e,f,g){"use strict";function h(i){return new(c("ReadableStream"))({pull:function j(k){k.error(i)}})}f.exports=h}),null);
__d("VideoSegmentStreamByFetch",["invariant","ReadableStream","VideoAkamaiRequestHelper","VideoSegmentInfoHelper","createErrorStream"],(function a(b,c,d,e,f,g,h){"use strict";var i=window.fetch;function j(k){this.$VideoSegmentStreamByFetch1=k}j.prototype.getResourceUrl=function(k){var l=this.$VideoSegmentStreamByFetch2(k),m=c("VideoSegmentInfoHelper").getRequestUri(l),n=m.toString();return n};j.prototype.startStream=function(k){i||h(0);var l=this.getResourceUrl(k),m={};if(c("VideoAkamaiRequestHelper").isAkamai(l)){var n=this.$VideoSegmentStreamByFetch2(k);m=c("VideoAkamaiRequestHelper").getRequestHeaders(n)||{}}return i(l,{headers:m}).then(function(o){var p=o.body,q=o.status,r=o.ok;if(!r)return c("createErrorStream")({type:"net",status:q,url:l,message:"HTTP error."});p.getReader||h(0);return p})["catch"](function(o){if(o instanceof TypeError)return c("createErrorStream")({type:"net",status:0,url:l,message:"Network failure."});return c("createErrorStream")({type:"stream_processing",status:0,url:l,message:"Stream processing error."+o})})};j.prototype.$VideoSegmentStreamByFetch2=function(k){return{baseUrl:this.$VideoSegmentStreamByFetch1,startByte:k.startByte,endByte:k.endByte}};f.exports=j}),null);
__d("VideoStreamingManager",["EventEmitter","FetchStreamStateTracker","FixedSizeTransform","MaybeNativePromise","NetworkErrorTransformStream","PausableRangeStream","StreamBandwidthReporter","StreamFetchRequestLogger","VideoSegmentStreamByFetch","performanceNow"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){var l=arguments.length<=1||arguments[1]===undefined?"":arguments[1],m=arguments.length<=2||arguments[2]===undefined?null:arguments[2];i.constructor.call(this);this.$VideoStreamingManager4=new(c("FetchStreamStateTracker"))();this.$VideoStreamingManager2=k;this.$VideoStreamingManager5=m;this.$VideoStreamingManager6=l}j.prototype.getStream=function(k){var l=k.startByte,m=k.endByte;if(l===undefined||m===undefined)return c("MaybeNativePromise").reject("request range does not exist");var n=function(){this.$VideoStreamingManager4.setNextRequestInfo(k);if(!this.$VideoStreamingManager4.isNextRequestContinuous()||!this.$VideoStreamingManager4.isNextRequestInRange()||!this.$VideoStreamingManager1){if(this.$VideoStreamingManager1)this.$VideoStreamingManager1.cancel("reset stream");this.$VideoStreamingManager1=this.$VideoStreamingManager7(k)}return this.$VideoStreamingManager1.getNextFixedSizeStream(m-l+1)}.bind(this);return n()["catch"](function(){this.$VideoStreamingManager8();return n()}.bind(this))};j.prototype.$VideoStreamingManager7=function(k){var l=this.$VideoStreamingManager9(k.baseUrl),m=this.$VideoStreamingManager2.getFetchRange(k);this.$VideoStreamingManager4.setFetchRange(m);var n=new(c("PausableRangeStream"))(m,l),o=new(c("FixedSizeTransform"))();n.startStream();n.getStream().pipeTo(o.getSink());return o};j.prototype.$VideoStreamingManager9=function(k){var l=new(c("VideoSegmentStreamByFetch"))(k),m=function m(o){return l.getResourceUrl(o)},n=l;n=this.$VideoStreamingManager10(n);n=this.$VideoStreamingManager11(n,m);n=this.$VideoStreamingManager12(n);return n};j.prototype.$VideoStreamingManager10=function(k){var l={startStream:function m(n){var o=new(c("NetworkErrorTransformStream"))();return k.startStream(n).then(function(p){return p.pipeThrough(o)})}};return l};j.prototype.$VideoStreamingManager12=function(k){var l={startStream:function(m){var n=new(c("StreamBandwidthReporter"))();n.addListener("bandwidthUpdate",function(o){return this.emit("bandwidthUpdate",o)}.bind(this));return k.startStream(m).then(function(o){return o.pipeThrough(n)})}.bind(this)};return l};j.prototype.$VideoStreamingManager11=function(k,l){var m=this.$VideoStreamingManager5;if(!m)return k;var n={startStream:function(o){var p=new(c("StreamFetchRequestLogger"))(m,this.$VideoStreamingManager6,l(o),c("performanceNow")());return k.startStream(o).then(function(q){return q.pipeThrough(p)})}.bind(this)};return n};j.prototype.$VideoStreamingManager8=function(){this.$VideoStreamingManager4=new(c("FetchStreamStateTracker"))()};f.exports=j}),null);
__d("ViewportPriorityAdjuster",["Event","SubscriptionsHandler","getElementPosition","getViewportDimensions","throttle"],(function a(b,c,d,e,f,g){"use strict";var h=500,i=800;function j(k){this.$ViewportPriorityAdjuster1=function(){};this.$ViewportPriorityAdjuster2=new(c("SubscriptionsHandler"))();this.$ViewportPriorityAdjuster3=k;this.$ViewportPriorityAdjuster2.addSubscriptions(c("Event").listen(window,"scroll",c("throttle")(function(){return this.$ViewportPriorityAdjuster4(k)}.bind(this),h)))}j.prototype.$ViewportPriorityAdjuster5=function(k){if(!k.paused)return 0;var l=c("getViewportDimensions")(),m=c("getElementPosition")(k),n=m.y,o=m.height,p=l.height;if(!n&&!o)return-2;if(n+o<0)return-2;if(n>=0&&n+o<=p+i||n<=0&&n+o>=0)return 0;return-1};j.prototype.$ViewportPriorityAdjuster4=function(k){this.$ViewportPriorityAdjuster1(this.$ViewportPriorityAdjuster5(k))};j.prototype.setOnPriorityChanged=function(k){this.$ViewportPriorityAdjuster1=k};j.prototype.getPriorityAdjustment=function(){return this.$ViewportPriorityAdjuster5(this.$ViewportPriorityAdjuster3)};j.prototype.cleanup=function(){this.$ViewportPriorityAdjuster1=function(){};this.$ViewportPriorityAdjuster2.release()};f.exports=j}),null);
__d("canUseFetchStream",[],(function a(b,c,d,e,f,g){"use strict";function h(){var i=!!window.fetch,j=!!(window.ReadableStream&&window.WritableStream),k=!!(window.ReadableStream&&window.ReadableStream.prototype.pipeTo);return i&&j&&k}f.exports=h}),null);
__d("logLongAkamaiRequest",["CurrentUser","JSLog"],(function a(b,c,d,e,f,g){var h=false,i=2,j=[];function k(l){if(c("CurrentUser").isEmployee()&&!h){j=j.filter(function(m){var n=m.time;return Date.now()-n<1e3*60*2});j.push({data:l,time:Date.now()});if(j.length>=i){h=true;c("JSLog").warn("Long latency video request to akamai: %s",j.map(function(m){var l=m.data;return l}).join(" ; "))}}}f.exports=k}),null);
__d("VideoPlayerStreamSwitchReasons",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BANDWIDTH:"bandwidth",FORCED:"forced",LOW_BUFFER_AVAILABILITY:"low_buffer_availability",PREFER_QUALITY_CLASS:"prefer_quality_class",USER:"user"})}),null);
__d("CustomAbrManager",["EventListener","SubscriptionsHandler","Shaka","VideoPlayerLoggerSource","VideoPlayerStreamSwitchReasons","VideoPlayerUtils","VideoQualityClasses","VideoPlayerShakaExperiments"],(function a(b,c,d,e,f,g){var h=c("Shaka").player.VideoTrack;function i(j){"use strict";this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new(c("SubscriptionsHandler"))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=-1;this.$CustomAbrManager6=true;this.$CustomAbrManager7=false;this.$CustomAbrManager8=j.maxWidth;this.$CustomAbrManager9=j.maxHeight;this.$CustomAbrManager10=j.minPlayQuality?j.minPlayQuality:null;this.$CustomAbrManager11=j.maxPlayQuality?j.maxPlayQuality:null;this.$CustomAbrManager12=j.initiallyForcedRepresentations;this.$CustomAbrManager13=j.video;this.$CustomAbrManager25=null;this.$CustomAbrManager22=null;this.$CustomAbrManager24=null;this.$CustomAbrManager23=j.abrLogger;this.$CustomAbrManager26=j.getSource;this.$CustomAbrManager27=null;if(j.enableAdaptation){this.$CustomAbrManager14=j.bandwidthModel;this.$CustomAbrManager15=j.bandwidthDowngradeTarget;this.$CustomAbrManager16=j.bandwidthUpgradeTarget;this.$CustomAbrManager17=j.useNewBandwidthBandLogic;this.$CustomAbrManager18=j.hvqUpgradeAggressiveness;this.$CustomAbrManager19=j.hvqInlineUpgradeAggressiveness;this.$CustomAbrManager20=j.preHvqUpgradeAggressiveness;this.$CustomAbrManager21=j.preHvqInlineUpgradeAggressiveness}}i.prototype.destroy=function(){"use strict";this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager6=false};i.prototype.setResolutionConstraint=function(j,k){"use strict";this.$CustomAbrManager8=j;this.$CustomAbrManager9=k;var l=this.$CustomAbrManager13.paused?c("VideoPlayerShakaExperiments").clearBufferOnConstraintChangePausedOffset:c("VideoPlayerShakaExperiments").clearBufferOnConstraintChangeOffset;this.$CustomAbrManager28({clearBufferIfUpgrading:c("VideoPlayerShakaExperiments").clearBufferOnConstraintChange,clearBufferOffset:l})};i.prototype.initialize=function(j,k){"use strict";if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k};i.prototype.start=function(){var j;"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager7)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;if(i.FIRST_SWITCH_INTERVAL===0)this.$CustomAbrManager5=i.FIRST_SWITCH_SEGMENT_INTERVAL;var k=[c("EventListener").listen(this.$CustomAbrManager2,"adaptation",this.$CustomAbrManager29.bind(this)),c("EventListener").listen(this.$CustomAbrManager2,"trackschanged",this.$CustomAbrManager30.bind(this))];if(!c("VideoPlayerShakaExperiments").triggerAbrWithTimer)k.push(c("EventListener").listen(this.$CustomAbrManager1,"bandwidth",this.$CustomAbrManager31.bind(this)));(j=this.$CustomAbrManager3).addSubscriptions.apply(j,k);this.$CustomAbrManager7=true};i.prototype.$CustomAbrManager30=function(){"use strict";this.$CustomAbrManager28()};i.prototype.setPreferredVideoTrack=function(j){"use strict";this.$CustomAbrManager25=j;this.$CustomAbrManager28({clearBufferIfUpgrading:true,clearBufferOffset:0})};i.prototype.unsetPreferredVideoTrack=function(){"use strict";this.$CustomAbrManager25=null;this.$CustomAbrManager28()};i.prototype.enable=function(j){"use strict";this.$CustomAbrManager6=j};i.prototype.getInitialVideoTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager32();return j?j.id:null};i.prototype.getInitialSwitchReason=function(){"use strict";return this.$CustomAbrManager24};i.prototype.getInitialAudioTrackId=function(){"use strict";if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager33();return j?j.id:null};i.prototype.selectVideoTrack=function(j,k,l,m){"use strict";if(!this.$CustomAbrManager7)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l,m)};i.$CustomAbrManager34=function(j){"use strict";for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null};i.prototype.$CustomAbrManager35=function(j){"use strict";if(!this.$CustomAbrManager6)return;if(this.$CustomAbrManager27)clearTimeout(this.$CustomAbrManager27);if(j>0)this.$CustomAbrManager27=setTimeout(function(){return this.$CustomAbrManager28()}.bind(this),j);else this.$CustomAbrManager28()};i.prototype.$CustomAbrManager31=function(){"use strict";if(this.$CustomAbrManager5<0){if(Date.now()<this.$CustomAbrManager4)return}else{var j=this.$CustomAbrManager2?this.$CustomAbrManager2.getFetchedVideoSegmentsCount():0;if(this.$CustomAbrManager5>j)return;this.$CustomAbrManager5=-1}this.$CustomAbrManager28()};i.prototype.$CustomAbrManager28=function(){var j=arguments.length<=0||arguments[0]===undefined?{clearBufferIfUpgrading:false,clearBufferOffset:0}:arguments[0];"use strict";if(!this.$CustomAbrManager6)return;var k=j.clearBufferIfUpgrading,l=j.clearBufferOffset,m=this.$CustomAbrManager32();if(m){if(m.active){if(c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager35(i.MIN_EVAL_INTERVAL);else this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return}var n=false;if(k){var o=i.$CustomAbrManager34(this.$CustomAbrManager2.getVideoTracks());n=o?h.compare(o,m)<0:false}this.selectVideoTrack(m,n,l,this.$CustomAbrManager22)}if(!c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager4=Number.POSITIVE_INFINITY};i.prototype.$CustomAbrManager29=function(event){"use strict";if(c("VideoPlayerShakaExperiments").triggerAbrWithTimer)this.$CustomAbrManager35(event.reason===this.getInitialSwitchReason()?i.FIRST_SWITCH_INTERVAL:i.MIN_SWITCH_INTERVAL);else if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL};i.prototype.$CustomAbrManager36=function(j,k){"use strict";if(this.$CustomAbrManager23)this.$CustomAbrManager23.setEvent("track_selection").setReason(j).setRepresentationID(k.streamInfoID).log()};i.prototype.$CustomAbrManager32=function(){var j,k=this,l;"use strict";var m=this.$CustomAbrManager2.getVideoTracks();if(m.length==0)return null;if(!this.$CustomAbrManager7)for(var n=0;n<m.length;n++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(m[n].streamInfoID)){this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").FORCED;this.$CustomAbrManager24=c("VideoPlayerStreamSwitchReasons").FORCED;this.$CustomAbrManager36(this.$CustomAbrManager22,m[n]);return m[n]}if(this.$CustomAbrManager25){var j=function(){var I=k.$CustomAbrManager25.id,J=m.find(function(B){return B.id===I});if(J){k.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").USER;k.$CustomAbrManager36(k.$CustomAbrManager22,J);return{v:J}}}();if(typeof j==="object")return j.v}m.sort(h.compare);if(this.$CustomAbrManager10!==null||this.$CustomAbrManager11!==null){var l=function(){var I=k.$CustomAbrManager10!==null?c("VideoQualityClasses").indexOf(k.$CustomAbrManager10):0,J=k.$CustomAbrManager11!==null?c("VideoQualityClasses").indexOf(k.$CustomAbrManager11):c("VideoQualityClasses").length-1;if(I<=J){var K=m.filter(function(M){return c("VideoQualityClasses").indexOf(M.fbQualityClass)>=I&&c("VideoQualityClasses").indexOf(M.fbQualityClass)<=J});k.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").PREFER_QUALITY_CLASS;if(!K.length){k.$CustomAbrManager36(k.$CustomAbrManager22,m[m.length-1]);return{v:m[m.length-1]}}var L=c("VideoQualityClasses").indexOf("sd");if(m.length==2&&K.length==2&&J<=L){k.$CustomAbrManager36(k.$CustomAbrManager22,m[0]);return{v:m[0]}}m=K}}();if(typeof l==="object")return l.v}var o=m[0],p=this.$CustomAbrManager9,q=this.$CustomAbrManager8,r=m;m=m.filter(function(I){return I.width<=q||I.height<=p});var s=i.$CustomAbrManager34(this.$CustomAbrManager2.getAudioTracks()),t=s?s.bandwidth:0,u=i.$CustomAbrManager34(r),v=r.indexOf(u),w=c("VideoPlayerUtils").getBufferedAheadOf(this.$CustomAbrManager13);if(w<c("VideoPlayerShakaExperiments").forceLowestRepresentationThreshold){var x=0;if(v>-1)x=Math.floor(v*c("VideoPlayerShakaExperiments").forceLowerRepresentationStepRatio);if(x>=m.length)x=m.length-1;this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").LOW_BUFFER_AVAILABILITY;o=m[x];this.$CustomAbrManager36(this.$CustomAbrManager22,o);return o}else{var y=this.$CustomAbrManager1.getBandwidth(this.$CustomAbrManager14),z=0;for(var A=0;A<m.length;A++){var B=m[A],C=A+1<m.length?m[A+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!B.bandwidth)continue;var D=this.$CustomAbrManager37(B,C,w,this.$CustomAbrManager26&&this.$CustomAbrManager26()),E=this.$CustomAbrManager17?z:(B.bandwidth+t)/this.$CustomAbrManager15,F=(C.bandwidth+t)/D;z=F;var G=c("VideoPlayerShakaExperiments").useBufferDowngradeThreshold,H=c("VideoPlayerShakaExperiments").bufferDowngradeThreshold;if(G&&w>H&&A<=v){o=u?u:B;continue}if(y>=E&&y<=F){o=B;if(o.active)break}}this.$CustomAbrManager22=c("VideoPlayerStreamSwitchReasons").BANDWIDTH}this.$CustomAbrManager36(this.$CustomAbrManager22,o);return o};i.prototype.$CustomAbrManager37=function(j,k,l,m){"use strict";var n=1;if(!j.isInlineHVQ&&k.isInlineHVQ)n=this.$CustomAbrManager21;else if(j.isInlineHVQ&&m===c("VideoPlayerLoggerSource").INLINE)n=this.$CustomAbrManager19;else if(j.isHVQ)n=this.$CustomAbrManager18;var o=c("VideoPlayerShakaExperiments").bufferTarget,p=o>-1;if(p){var q=l>o,r=q?c("VideoPlayerShakaExperiments").bufferTargetOverflowUpgradeAggressiveness:c("VideoPlayerShakaExperiments").bufferTargetUnderflowUpgradeAggressiveness;n*=r}return this.$CustomAbrManager16*n};i.prototype.$CustomAbrManager33=function(){"use strict";var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager7)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager12&&this.$CustomAbrManager12.includes(j[k].streamInfoID))return j[k];return null};i.FIRST_SWITCH_INTERVAL=c("VideoPlayerShakaExperiments").firstSwitchInterval;i.FIRST_SWITCH_SEGMENT_INTERVAL=c("VideoPlayerShakaExperiments").firstSwitchSegmentInterval;i.MIN_SWITCH_INTERVAL=c("VideoPlayerShakaExperiments").minSwitchInterval;i.MIN_EVAL_INTERVAL=c("VideoPlayerShakaExperiments").minEvalInterval;f.exports=i}),null);
__d("VideoPlayerAbrLogger",["VideoPlayerAbrTypedLogger","VideoPlayerShakaBandwidthEstimator","VideoPlayerUtils","VideoPlayerShakaExperiments","VideoPlayerAbrLoggerConfig"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("VideoPlayerAbrTypedLogger"));i=h&&h.prototype;function j(k){i.constructor.call(this);i.setSession.call(this,k.uniqueID);i.setVideoID.call(this,k.videoID);this.$VideoPlayerAbrLogger4()}j.prototype.setVideoElement=function(k){this.$VideoPlayerAbrLogger3=k;return this};j.prototype.setBytes=function(k){this.$VideoPlayerAbrLogger1.bytes=k;return this};j.prototype.setDelayMs=function(k){this.$VideoPlayerAbrLogger1.delayMs=k;return this};j.prototype.setEvent=function(event){this.$VideoPlayerAbrLogger1.event=event;return this};j.prototype.setUnsampledReason=function(k){this.$VideoPlayerAbrLogger1.unsampledReason=k;return this};j.prototype.setReason=function(k){this.$VideoPlayerAbrLogger1.reason=k;return this};j.prototype.setRepresentationID=function(k){this.$VideoPlayerAbrLogger2=k;return this};j.prototype.setClientTimeBegin=function(k){this.$VideoPlayerAbrLogger1.clientTimeBegin=k;return this};j.prototype.setClientTimeEnd=function(k){this.$VideoPlayerAbrLogger1.clientTimeEnd=k;return this};j.prototype.$VideoPlayerAbrLogger4=function(){this.$VideoPlayerAbrLogger1={bytes:null,delayMs:null,event:null,unsampledReason:null,reason:null,clientTimeBegin:null,clientTimeEnd:null}};j.prototype.$VideoPlayerAbrLogger5=function(){if(this.$VideoPlayerAbrLogger1.event==null)return;i.setBytes.call(this,this.$VideoPlayerAbrLogger1.bytes);i.setDelayMs.call(this,this.$VideoPlayerAbrLogger1.delayMs);i.setEvent.call(this,this.$VideoPlayerAbrLogger1.event);i.setUnsampledReason.call(this,this.$VideoPlayerAbrLogger1.unsampledReason);i.setReason.call(this,this.$VideoPlayerAbrLogger1.reason);var k=this.$VideoPlayerAbrLogger1.clientTimeBegin,l=this.$VideoPlayerAbrLogger1.clientTimeEnd;if(k==null){k=Date.now();l=k}else if(l==null)l=k;i.setClientTimeBegin.call(this,k);i.setClientTimeEnd.call(this,l)};j.prototype.log=function(){if(c("VideoPlayerShakaExperiments").enableClientSideAbrLoggerSampling&&!c("VideoPlayerAbrLoggerConfig").isSampled)return;this.$VideoPlayerAbrLogger5();i.setBandwidthEstimate.call(this,parseInt(c("VideoPlayerShakaBandwidthEstimator").getBandwidth(),10));i.setRepresentationID.call(this,this.$VideoPlayerAbrLogger2);if(this.$VideoPlayerAbrLogger3){i.setPlayhead.call(this,Math.round(this.$VideoPlayerAbrLogger3.currentTime*1e3));i.setBufferedAhead.call(this,Math.round(c("VideoPlayerUtils").getBufferedAheadOf(this.$VideoPlayerAbrLogger3)))}i.log.call(this);this.$VideoPlayerAbrLogger4()};f.exports=j}),null);
__d("PerformanceResourceBuffer",["BanzaiODS","EventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=b.__isResourceTimingBufferFull;delete b.__isResourceTimingBufferFull;performance.onresourcetimingbufferfull=function(){j=true;if(k)k.emit("full")};var k=void 0;h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this)}l.prototype.isBufferFull=function(){return j};k=new l();if(k.isBufferFull())c("BanzaiODS").bumpEntityKey("performance","resourcetimingbufferfull");else k.addListener("full",function(){return c("BanzaiODS").bumpEntityKey("performance","resourcetimingbufferfull")});f.exports=k}),null);
__d("VideoPlayerLiveStreamState",["RTISubscriptionManager","EventEmitter"],(function a(b,c,d,e,f,g){"use strict";var h,i,j={interrupt:"streamInterruptAt",ended:"endedAt"};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$VideoPlayerLiveStreamState2=l;this.$VideoPlayerLiveStreamState1=[]}k.prototype.subscribe=function(){this.$VideoPlayerLiveStreamState1=[];for(var l in j)this.$VideoPlayerLiveStreamState1.push(c("RTISubscriptionManager").subscribe("video_broadcast/"+l+"_"+this.$VideoPlayerLiveStreamState2,this.$VideoPlayerLiveStreamState3.bind(this,j[l])))};k.prototype.unsubscribe=function(){for(var l=this.$VideoPlayerLiveStreamState1,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}var p=o;p.unsubscribe()}this.$VideoPlayerLiveStreamState1=[]};k.prototype.$VideoPlayerLiveStreamState3=function(l,m){var n=JSON.parse(m.payload||"{}")||{},o=n.time_position;if(typeof o==="number"){o/=1e3;this.emit(l,o)}};f.exports=k}),null);
__d("VideoPlayerHTML5Shaka",["invariant","Promise","CustomAbrManager","EventEmitter","EventListener","Event","TaggedTimeRanges","VideoDashPrefetchCache","VideoPlayerAbrLogger","VideoPlayerLiveStreamState","VideoPlayerMetaData","VideoPlayerShakaBandwidthEstimator","VideoPlayerShakaExperiments","VideoPlayerExperiments","VideoPlayerShakaPerformanceLogger","clearInterval","dispatchEvent","dispatchCustomEvent","dangerouslyOverrideMediaElementEndedProperty","guid","setInterval","Shaka","PerformanceResourceBuffer"],(function a(b,c,d,e,f,g,h){var i,j,k=c("Shaka").player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c("Shaka").dash.mpd.parseMpd,p=c("Shaka").util.FailoverUri,q=window.devicePixelRatio||1,r=c("VideoPlayerShakaBandwidthEstimator").getEstimator();c("PerformanceResourceBuffer");p.setPrefetchCacheValueGetter(c("VideoDashPrefetchCache").getCacheValue);function s(u,event){var v=c("EventListener").capture(u.parentNode,event,function(w){if(w.target!=u)return;v.remove();c("Event").kill(w)})}i=babelHelpers.inherits(t,c("EventEmitter"));j=i&&i.prototype;function t(u,v,w){var x=w.videoID,y=w.width,z=w.height,A=w.manifest,B=w.manifestUrl,C=w.isLive,D=w.minPlayQuality,E=w.maxPlayQuality,F=w.accessToken,G=w.startTimestamp,H=w.playerOrigin,I=w.playerSuborigin,J=w.isSpherical,K=w.getSource,L=w.vpcPlayingStateEmitter;"use strict";j.constructor.call(this);this.$VideoPlayerHTML5Shaka4=D;this.$VideoPlayerHTML5Shaka5=E;this.$VideoPlayerHTML5Shaka6=false;this.$VideoPlayerHTML5Shaka7=null;this.$VideoPlayerHTML5Shaka8=1;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka10=C;this.$VideoPlayerHTML5Shaka11=C;this.$VideoPlayerHTML5Shaka12=false;this.$VideoPlayerHTML5Shaka13=J;this.$VideoPlayerHTML5Shaka14=y;this.$VideoPlayerHTML5Shaka15=z;this.$VideoPlayerHTML5Shaka16=false;this.$VideoPlayerHTML5Shaka2=v;this.$VideoPlayerHTML5Shaka35=null;this.$VideoPlayerHTML5Shaka18=K;var M=this.$VideoPlayerHTML5Shaka35;this.$VideoPlayerHTML5Shaka3=x;var N=c("guid")();this.$VideoPlayerHTML5Shaka24=c("VideoPlayerShakaPerformanceLogger").isEnabled()?new(c("VideoPlayerShakaPerformanceLogger"))({videoID:x,video:u,representationId:M,isLive:C,accessToken:F,playerOrigin:H,playerSuborigin:I,uniqueID:N}):null;this.$VideoPlayerHTML5Shaka28=new(c("VideoPlayerAbrLogger"))({videoID:x,uniqueID:N}).setRepresentationID(M).setVideoElement(u);if(!c("VideoPlayerShakaExperiments").improveRebufferLogging)this.$VideoPlayerHTML5Shaka31=true;c("EventListener").listen(u,"playing",this.$VideoPlayerHTML5Shaka41.bind(this));c("EventListener").listen(u,"timeupdate",function(T){this.$VideoPlayerHTML5Shaka42(T.target.currentTime)}.bind(this));c("EventListener").listen(u,"pause",this.$VideoPlayerHTML5Shaka43.bind(this));c("EventListener").listen(u,"play",function(){this.$VideoPlayerHTML5Shaka12=true}.bind(this));this.$VideoPlayerHTML5Shaka32=Date.now();if(c("VideoPlayerShakaExperiments").refreshVODManifest)this.$VideoPlayerHTML5Shaka44();this.$VideoPlayerHTML5Shaka20=[];this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka37=L;this.$VideoPlayerHTML5Shaka17=new l(u,this.$VideoPlayerHTML5Shaka24,this.$VideoPlayerHTML5Shaka28,this.$VideoPlayerHTML5Shaka37);this.$VideoPlayerHTML5Shaka17.addEventListener("bufferingStart",function(){return this.$VideoPlayerHTML5Shaka45()}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("bufferingEnd",function(){return this.$VideoPlayerHTML5Shaka46()}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("error",function(T){return this.$VideoPlayerHTML5Shaka47(T)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("adaptation",this.$VideoPlayerHTML5Shaka48.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("trackschanged",this.$VideoPlayerHTML5Shaka49.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("debug/shakaEvent",function(T){return this.emit("debug/shakaEvent",T.detail)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("manifestwrapped",this.$VideoPlayerHTML5Shaka50.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("cea608-captions",function(T){this.emit("cea608CaptionsParsed",T.detail.captions)}.bind(this));this.$VideoPlayerHTML5Shaka17.addEventListener("manifestIsUpdating",this.$VideoPlayerHTML5Shaka51.bind(this));var O=false,P=null,Q=null;this.$VideoPlayerHTML5Shaka39=c("VideoPlayerShakaExperiments").liveSendPushHeaders;this.$VideoPlayerHTML5Shaka40=B;if(A)this.$VideoPlayerHTML5Shaka34=o(A,B);else{this.$VideoPlayerHTML5Shaka34=B;O=B&&B.indexOf("dash-abr")!==-1}if(O){this.$VideoPlayerHTML5Shaka39=c("VideoPlayerShakaExperiments").liveAbrSendPushHeaders;if(this.$VideoPlayerHTML5Shaka39){P=c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation;Q=c("VideoPlayerShakaExperiments").liveAbrAudioPushRepresentation;this.$VideoPlayerHTML5Shaka2=[c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation]}if(c("VideoPlayerShakaExperiments").liveAbrAlwaysForceRepresentation)this.$VideoPlayerHTML5Shaka2=[c("VideoPlayerShakaExperiments").liveAbrInitialPushRepresentation]}this.$VideoPlayerHTML5Shaka1=u;this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka52();this.$VideoPlayerHTML5Shaka23=this.$VideoPlayerHTML5Shaka53();var R=this.getLocalEstimator();if(R)R.setResolutionConstraint(this.$VideoPlayerHTML5Shaka54(),this.$VideoPlayerHTML5Shaka55());this.$VideoPlayerHTML5Shaka17.configure({enableAdaptation:this.getIsAbrEnabled(),appendPlayingQueryParam:c("VideoPlayerShakaExperiments").addCdnDebugQueryParameters,endBufferingOnPlaying:c("VideoPlayerShakaExperiments").endBufferingOnPlaying,usePlaybackRateForBuffering:c("VideoPlayerShakaExperiments").improveRebufferLogging,streamBufferSize:c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka56(),initialStreamBufferSize:t.isAutoplayBandwidthRestrained(C)||c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride?0:this.$VideoPlayerHTML5Shaka57(),smartBufferAdjustmentParams:c("VideoPlayerShakaExperiments").smartBufferAdjustmentParams,dynamicStreamBufferSize:C?c("VideoPlayerShakaExperiments").liveDynamicStreamBufferSize:null,includeStreamBufferSizeInStartOffset:true,minMpdRefreshInterval:c("VideoPlayerShakaExperiments").minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c("VideoPlayerShakaExperiments").liveStreamEndTimeout/1e3,enableLiveInterruptionDetection:true,liveInterruptionConsecutiveUpdatesWithoutChange:c("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c("VideoPlayerShakaExperiments").liveInterruptionConsecutiveUpdatesWithChange,liveMaxSegmentsToPush:c("VideoPlayerShakaExperiments").liveMaxSegmentsToPush,liveSendPushHeaders:t.isAutoplayBandwidthRestrained(C)?false:this.$VideoPlayerHTML5Shaka58(),liveMaxManifestFetchesWithPush:c("VideoPlayerShakaExperiments").liveMaxManifestFetchesWithPush,resolveVideoTimeUpdateOnFragmentedTimeRanges:c("VideoPlayerShakaExperiments").resolveVideoTimeUpdateOnFragmentedTimeRanges,enableManifestDebug:c("VideoPlayerShakaExperiments").enableVideoDebug,reappendInitSegmentAfterAbort:c("VideoPlayerShakaExperiments").reappendInitSegmentAfterAbort,useInlineInitSegment:c("VideoPlayerShakaExperiments").useInlineInitSegment,currentTimeDuringReadyStateZeroThrows:c("VideoPlayerShakaExperiments").currentTimeDuringReadyStateZeroThrows,liveInitialPushRepresentation:P,liveAudioPushRepresentation:Q,jumpToLiveThreshold:c("VideoPlayerShakaExperiments").jumpToLiveThreshold,liveDataFetchMaxRetries:c("VideoPlayerShakaExperiments").liveDataFetchMaxRetries,liveSourceBufferClearMaxRetries:c("VideoPlayerShakaExperiments").liveSourceBufferClearMaxRetries,useLongCacheForManifest:c("VideoPlayerShakaExperiments").useLongCacheForManifest,jumpToEarliestPositionInCurrentBlock:c("VideoPlayerShakaExperiments").jumpToEarliestPositionInCurrentBlock,ignoreMinBufferTime:c("VideoPlayerShakaExperiments").ignoreMinBufferTime,playheadFragmentedGapDiffAllowance:c("VideoPlayerShakaExperiments").playheadFragmentedGapDiffAllowance,fixBufferingGoalDetermination:c("VideoPlayerShakaExperiments").fixBufferingGoalDetermination,skipEmptySegments:c("VideoPlayerShakaExperiments").skipEmptySegments,useMicroTaskTimeouts:true,enableRequestPipelining:this.$VideoPlayerHTML5Shaka11?c("VideoPlayerShakaExperiments").enableRequestPipeliningForLive:c("VideoPlayerShakaExperiments").enableRequestPipeliningForVod,enableStreaming:this.$VideoPlayerHTML5Shaka11?false:c("VideoPlayerShakaExperiments").enableStreamingForVod});if(C){var S=new(c("VideoPlayerLiveStreamState"))(x);this.$VideoPlayerHTML5Shaka36=S;this.$VideoPlayerHTML5Shaka17.addEventListener("liveheadIdleAt",function(event){var T=event.seconds;if(T>(this.$VideoPlayerHTML5Shaka7||0)){this.$VideoPlayerHTML5Shaka59(T);if(this.$VideoPlayerHTML5Shaka25&&this.$VideoPlayerHTML5Shaka60()){this.$VideoPlayerHTML5Shaka61();this.emit("bufferingEnd")}}}.bind(this));this.addListenersToLiveStreamState(S)}if(G)this.$VideoPlayerHTML5Shaka17.setPlaybackStartTime(G);this.$VideoPlayerHTML5Shaka17.load(this.$VideoPlayerHTML5Shaka23)["catch"](function(T){if(this.$VideoPlayerHTML5Shaka6&&c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw T}.bind(this))}t.prototype.addListenersToLiveStreamState=function(u){"use strict";u.addListener("streamInterruptAt",this.$VideoPlayerHTML5Shaka59.bind(this));["streamInterruptAt","commercialBreakAt","endedAt"].forEach(function(v){u.addListener(v,function(event){this.emit("debug/shakaEvent",{type:v,event:event})}.bind(this))}.bind(this))};t.prototype.hasSubtitles=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.hasInlinedCea608Subtitles()&&c("VideoPlayerShakaExperiments").enableCea608Parsing};t.prototype.enableSubtitles=function(u){"use strict";this.$VideoPlayerHTML5Shaka23.setEnableCea608Parsing(u&&c("VideoPlayerShakaExperiments").enableCea608Parsing)};t.prototype.getDebug=function(){"use strict";return{AbrManager:this.$VideoPlayerHTML5Shaka38,VideoSource:this.$VideoPlayerHTML5Shaka23,ShakaPlayer:this.$VideoPlayerHTML5Shaka17}};t.getEstimatedBandwidth=function(){"use strict";return r.getBandwidth()};t.isAutoplayBandwidthRestrained=function(u){"use strict";var v=c("VideoPlayerShakaBandwidthEstimator").isAutoplayBandwidthRestrained(u);return v};t.prototype.$VideoPlayerHTML5Shaka42=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka19.get(u);if(!v)return;var w=v.id,x=v.reason,y=v.performanceLogger;if(this.$VideoPlayerHTML5Shaka35!==w){var z=this.$VideoPlayerHTML5Shaka35;this.$VideoPlayerHTML5Shaka35=w;if(y)y.setStreamSwitchReason(x).log();this.emit("representation_ended",{representationID:z,nextRepresentationID:w,streamSwitchReason:x})}};t.prototype.getStreamInfoIDForTimePosition=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka19.get(u),w=null;if(v)w=v.id;return w};t.prototype.$VideoPlayerHTML5Shaka62=function(u,v){"use strict";if(u.fbQualityLabel)return u.fbQualityLabel;else if(n.compare(u,v[0])==0)return"SD";else if(n.compare(u,v[v.length-1])==0)return"HD";else return null};t.prototype.getAvailableVideoQualities=function(){"use strict";if(this.$VideoPlayerHTML5Shaka6)return this.$VideoPlayerHTML5Shaka20;var u=this.$VideoPlayerHTML5Shaka23.getVideoTracks();u.sort(n.compare);return u.every(function(v){return v.fbQualityLabel!==null})?u.map(function(v){return v.fbQualityLabel}):u.length>1?["SD","HD"]:["SD"]};t.prototype.getVideoProjection=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getVideoProjection()};t.prototype.getIsAbrEnabled=function(){"use strict";return true};t.prototype.getSelectedVideoQuality=function(){"use strict";if(this.$VideoPlayerHTML5Shaka6)return this.$VideoPlayerHTML5Shaka21;var u=this.$VideoPlayerHTML5Shaka23.getVideoTracks();u.sort(n.compare);var v=u.find(function(w){return w.active});return v?this.$VideoPlayerHTML5Shaka62(v,u):null};t.prototype.canAutoSelectVideoQuality=function(){"use strict";return true};t.prototype.setPreloadDisabled=function(u){"use strict";if(c("VideoPlayerShakaExperiments").blockAutoplayAllowPreloadSettingsChange)this.$VideoPlayerHTML5Shaka17.configure({initialStreamBufferSize:u?0:this.$VideoPlayerHTML5Shaka57(),liveSendPushHeaders:u?false:this.$VideoPlayerHTML5Shaka58()})};t.prototype.restoreStreamBufferSize=function(){"use strict";if(!c("VideoPlayerShakaExperiments").useStreamBufferSizeOverride)return;this.$VideoPlayerHTML5Shaka17.configure({initialStreamBufferSize:this.$VideoPlayerHTML5Shaka57(),streamBufferSize:this.$VideoPlayerHTML5Shaka56()})};t.prototype.$VideoPlayerHTML5Shaka57=function(){"use strict";return this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveInitialStreamBufferSize:c("VideoPlayerShakaExperiments").initialStreamBufferSize};t.prototype.$VideoPlayerHTML5Shaka56=function(){"use strict";return this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveStreamBufferSize:c("VideoPlayerShakaExperiments").streamBufferSize};t.prototype.$VideoPlayerHTML5Shaka58=function(){"use strict";return this.$VideoPlayerHTML5Shaka39};t.prototype.setPreferredVideoQuality=function(u){"use strict";var v=this.$VideoPlayerHTML5Shaka23.getVideoTracks();v.sort(n.compare);var w=v.find(function(x){return u==this.$VideoPlayerHTML5Shaka62(x,v)}.bind(this));if(w){this.$VideoPlayerHTML5Shaka22=u;this.$VideoPlayerHTML5Shaka38.setPreferredVideoTrack(w)}};t.prototype.unsetPreferredVideoQuality=function(){"use strict";this.$VideoPlayerHTML5Shaka22=null;this.$VideoPlayerHTML5Shaka38.unsetPreferredVideoTrack()};t.prototype.pause=function(){"use strict";if(this.$VideoPlayerHTML5Shaka25&&!c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Shaka29=true;this.$VideoPlayerHTML5Shaka30=true;c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"pause");this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(false)}else this.$VideoPlayerHTML5Shaka1.pause()};t.prototype.play=function(){"use strict";this.$VideoPlayerHTML5Shaka12=true;if(this.$VideoPlayerHTML5Shaka24&&(this.$VideoPlayerHTML5Shaka1.paused||this.$VideoPlayerHTML5Shaka1.ended))this.$VideoPlayerHTML5Shaka26=this.$VideoPlayerHTML5Shaka24.getOperationLogger("play").setState("pending_play").start();if(this.$VideoPlayerHTML5Shaka25&&!c("VideoPlayerShakaExperiments").improveRebufferLogging){this.$VideoPlayerHTML5Shaka29=false;this.$VideoPlayerHTML5Shaka30=true;c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"play");c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"waiting");this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(true);return c("Promise").resolve()}else return this.$VideoPlayerHTML5Shaka1.play()};t.prototype.$VideoPlayerHTML5Shaka60=function(){"use strict";var u=this.$VideoPlayerHTML5Shaka7;if(u){var v=this.$VideoPlayerHTML5Shaka1.currentTime,w=4,x=v>u-w,y=v>u;if(y){this.emit("debug/shakaEvent",{type:"streamResumedAt",event:this.$VideoPlayerHTML5Shaka7});this.$VideoPlayerHTML5Shaka7=null}else if(this.$VideoPlayerHTML5Shaka25)this.$VideoPlayerHTML5Shaka9=x}return this.$VideoPlayerHTML5Shaka9};t.prototype.$VideoPlayerHTML5Shaka45=function(){"use strict";if(!c("VideoPlayerShakaExperiments").improveRebufferLogging){s(this.$VideoPlayerHTML5Shaka1,"pause");this.$VideoPlayerHTML5Shaka29=false;this.$VideoPlayerHTML5Shaka30=false}this.$VideoPlayerHTML5Shaka25=true;if(this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka61();else{this.$VideoPlayerHTML5Shaka17.setResumeAfterBuffering(true);this.emit("bufferingStart")}};t.prototype.$VideoPlayerHTML5Shaka61=function(){"use strict";if(!c("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka24&&!this.$VideoPlayerHTML5Shaka27)this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka24.getOperationLogger("stream_interrupted").start();this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(true)}this.emit("streamInterrupted")};t.prototype.$VideoPlayerHTML5Shaka46=function(){var u,v=this;"use strict";if(!c("VideoPlayerShakaExperiments").improveRebufferLogging){if(!this.$VideoPlayerHTML5Shaka29)s(this.$VideoPlayerHTML5Shaka1,"play");if(!this.$VideoPlayerHTML5Shaka30)(function(){var w=c("EventListener").capture(v.$VideoPlayerHTML5Shaka1.parentNode,"playing",function(x){if(x.target!=this.$VideoPlayerHTML5Shaka1)return;w.remove();if(this.$VideoPlayerHTML5Shaka31){this.$VideoPlayerHTML5Shaka31=false;return}c("Event").kill(x)}.bind(v))})()}this.$VideoPlayerHTML5Shaka25=false;if(this.$VideoPlayerHTML5Shaka27){this.$VideoPlayerHTML5Shaka27.log();this.$VideoPlayerHTML5Shaka27=null}this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(false);if(this.$VideoPlayerHTML5Shaka9)this.$VideoPlayerHTML5Shaka63();else this.emit("bufferingEnd")};t.prototype.$VideoPlayerHTML5Shaka47=function(u){"use strict";var v=u.detail||{},w=v.type||"undefined",x=v.status||null,y=v.url||null;this.$VideoPlayerHTML5Shaka64();if(this.$VideoPlayerHTML5Shaka10&&Object.values(c("VideoPlayerShakaExperiments").blockPlayRequestHTTPStatusList).indexOf(x)!=-1){if(this.$VideoPlayerHTML5Shaka12){c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing");this.$VideoPlayerHTML5Shaka12=false}return this.$VideoPlayerHTML5Shaka65()}this.emit("error",{error:"SHAKA_"+w.toUpperCase(),message:v.message,httpStatus:x,url:y});return undefined};t.prototype.unload=function(){"use strict";this.$VideoPlayerHTML5Shaka21=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka20=this.getAvailableVideoQualities();if(!this.$VideoPlayerHTML5Shaka23)this.$VideoPlayerHTML5Shaka10=false;else if(this.$VideoPlayerHTML5Shaka23.isLive()!==null)this.$VideoPlayerHTML5Shaka10=this.$VideoPlayerHTML5Shaka23.isLive();this.$VideoPlayerHTML5Shaka6=true;c("clearInterval")(this.$VideoPlayerHTML5Shaka33);var u=this.$VideoPlayerHTML5Shaka36;if(u){u.unsubscribe();u.removeAllListeners()}this.$VideoPlayerHTML5Shaka17.unload()["catch"](function(v){if(c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw v})};t.prototype.$VideoPlayerHTML5Shaka52=function(){"use strict";var u={enableAdaptation:this.getIsAbrEnabled(),minPlayQuality:this.$VideoPlayerHTML5Shaka4,maxPlayQuality:this.$VideoPlayerHTML5Shaka5,maxWidth:this.$VideoPlayerHTML5Shaka54(),maxHeight:this.$VideoPlayerHTML5Shaka55(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka2,bandwidthModel:this.$VideoPlayerHTML5Shaka10?"aggressive":"conservative",bandwidthDowngradeTarget:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveBandwidthDowngradeTarget:c("VideoPlayerShakaExperiments").bandwidthDowngradeTarget,bandwidthUpgradeTarget:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveBandwidthUpgradeTarget:c("VideoPlayerShakaExperiments").bandwidthUpgradeTarget,useNewBandwidthBandLogic:c("VideoPlayerShakaExperiments").useNewBandwidthBandLogic,hvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveHvqUpgradeAggressiveness:c("VideoPlayerShakaExperiments").hvqUpgradeAggressiveness,hvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").liveHvqInlineUpgradeAggressiveness:c("VideoPlayerShakaExperiments").hvqInlineUpgradeAggressiveness,preHvqUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").livePreHvqUpgradeAggressiveness:c("VideoPlayerShakaExperiments").preHvqUpgradeAggressiveness,preHvqInlineUpgradeAggressiveness:this.$VideoPlayerHTML5Shaka10?c("VideoPlayerShakaExperiments").livePreHvqInlineUpgradeAggressiveness:c("VideoPlayerShakaExperiments").preHvqInlineUpgradeAggressiveness,video:this.$VideoPlayerHTML5Shaka1,abrLogger:this.$VideoPlayerHTML5Shaka28,getSource:this.$VideoPlayerHTML5Shaka18};return new(c("CustomAbrManager"))(u)};t.prototype.$VideoPlayerHTML5Shaka53=function(){"use strict";this.$VideoPlayerHTML5Shaka38||h(0);this.$VideoPlayerHTML5Shaka34||h(0);var u=new m(this.$VideoPlayerHTML5Shaka34,null,r,this.$VideoPlayerHTML5Shaka38);this.$VideoPlayerHTML5Shaka19=new(c("TaggedTimeRanges"))(function(v,w){return v.id===w.id&&v.reason===w.reason});u.setTaggedTimeRangesEntryAdder(function(v,w,x){this.$VideoPlayerHTML5Shaka19.add(v,w,x)}.bind(this));return u};t.prototype.$VideoPlayerHTML5Shaka66=function(u){"use strict";this.$VideoPlayerHTML5Shaka38=this.$VideoPlayerHTML5Shaka52();this.$VideoPlayerHTML5Shaka23=this.$VideoPlayerHTML5Shaka53();if(this.$VideoPlayerHTML5Shaka60()){this.$VideoPlayerHTML5Shaka8=this.$VideoPlayerHTML5Shaka17.getPlaybackRate();this.$VideoPlayerHTML5Shaka1.playbackRate=0;this.emit("streamInterrupted")}this.$VideoPlayerHTML5Shaka17.setPlaybackStartTime(u);this.$VideoPlayerHTML5Shaka6=false;return this.$VideoPlayerHTML5Shaka17.load(this.$VideoPlayerHTML5Shaka23).then(function(){if(this.$VideoPlayerHTML5Shaka10!=this.$VideoPlayerHTML5Shaka23.isLive())return this.$VideoPlayerHTML5Shaka65();if(this.$VideoPlayerHTML5Shaka22)this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka22);this.$VideoPlayerHTML5Shaka21=null;this.$VideoPlayerHTML5Shaka20=[];return undefined}.bind(this))};t.prototype.$VideoPlayerHTML5Shaka67=function(u){"use strict";if(this.$VideoPlayerHTML5Shaka6&&c("VideoPlayerShakaExperiments").ignoreErrorsAfterUnload)return;throw u};t.prototype.reload=function(u){"use strict";if(!this.$VideoPlayerHTML5Shaka6)return c("VideoPlayerShakaExperiments").fixReloadPromise?c("Promise").resolve():undefined;var v=this.$VideoPlayerHTML5Shaka36;if(v){v.subscribe();this.addListenersToLiveStreamState(v)}var w=void 0;if(c("VideoPlayerShakaExperiments").refreshVODManifest)w=this.$VideoPlayerHTML5Shaka44().then(function(){return this.$VideoPlayerHTML5Shaka66(u)}.bind(this))["catch"](function(x){return this.$VideoPlayerHTML5Shaka67(x)}.bind(this));else w=this.$VideoPlayerHTML5Shaka66(u)["catch"](function(x){return this.$VideoPlayerHTML5Shaka67()}.bind(this));return c("VideoPlayerShakaExperiments").fixReloadPromise?w:undefined};t.prototype.setPlaybackRate=function(u){"use strict";this.$VideoPlayerHTML5Shaka8=u;if(!this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka17.setPlaybackRate(u)};t.prototype.setSmartBufferAdjustmentEnabled=function(u){"use strict";this.$VideoPlayerHTML5Shaka17.configure({smartBufferAdjustmentEnabled:u})};t.prototype.setVideoStreamOffset=function(u){"use strict";this.$VideoPlayerHTML5Shaka17.setVideoStreamOffset(u)};t.prototype.$VideoPlayerHTML5Shaka65=function(){"use strict";c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"seeked");c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"playing");if(c("VideoPlayerExperiments").abortLoadingDecisioningLogic){c("dispatchCustomEvent")(this.$VideoPlayerHTML5Shaka1,"pause",c("dangerouslyOverrideMediaElementEndedProperty")());c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended")}else if(c("VideoPlayerShakaExperiments").endLivePlaybackWithPause)c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"pause");else c("dispatchEvent")(this.$VideoPlayerHTML5Shaka1,"ended");this.emit("streamResumed");this.unload()};t.prototype.getLongestInitResponseTime=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getLongestInitResponseTime()};t.prototype.getLocalEstimator=function(){"use strict";return this.$VideoPlayerHTML5Shaka23.getLocalEstimator()};t.$VideoPlayerHTML5Shaka68=function(){"use strict";return c("VideoPlayerShakaExperiments").resolutionConstraintFactor*q};t.prototype.$VideoPlayerHTML5Shaka54=function(){"use strict";if(this.$VideoPlayerHTML5Shaka13||!c("VideoPlayerShakaExperiments").useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka14*t.$VideoPlayerHTML5Shaka68()};t.prototype.$VideoPlayerHTML5Shaka55=function(){"use strict";if(this.$VideoPlayerHTML5Shaka13||!c("VideoPlayerShakaExperiments").useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka15*t.$VideoPlayerHTML5Shaka68()};t.prototype.setDimensions=function(u,v){"use strict";this.$VideoPlayerHTML5Shaka14=u;this.$VideoPlayerHTML5Shaka15=v;var w=this.$VideoPlayerHTML5Shaka54(),x=this.$VideoPlayerHTML5Shaka55();this.$VideoPlayerHTML5Shaka38.setResolutionConstraint(w,x);var y=this.getLocalEstimator();if(y)y.setResolutionConstraint(w,x)};t.isSupported=function(){"use strict";return l.isBrowserSupported()};t.prototype.$VideoPlayerHTML5Shaka49=function(){"use strict";this.emit("tracksChanged")};t.prototype.$VideoPlayerHTML5Shaka48=function(event){"use strict";if(event.contentType==="video"){if(this.$VideoPlayerHTML5Shaka24)this.$VideoPlayerHTML5Shaka24.setRepresentationID(event.id);this.$VideoPlayerHTML5Shaka28.setRepresentationID(event.id);this.emit("adaptation",{reason:event.reason})}};t.prototype.$VideoPlayerHTML5Shaka59=function(u){"use strict";if(c("VideoPlayerShakaExperiments").fixIsLiveInterruptedBacktest){if(this.$VideoPlayerHTML5Shaka24&&!this.$VideoPlayerHTML5Shaka27)this.$VideoPlayerHTML5Shaka27=this.$VideoPlayerHTML5Shaka24.getOperationLogger("stream_interrupted").start();this.$VideoPlayerHTML5Shaka23.setIsLiveInterrupted(true)}this.$VideoPlayerHTML5Shaka7=u};t.prototype.$VideoPlayerHTML5Shaka51=function(){"use strict";if(this.$VideoPlayerHTML5Shaka60())this.$VideoPlayerHTML5Shaka63()};t.prototype.$VideoPlayerHTML5Shaka63=function(){"use strict";this.$VideoPlayerHTML5Shaka7=null;this.$VideoPlayerHTML5Shaka9=false;this.$VideoPlayerHTML5Shaka23.forceResyncVideoBuffer();this.$VideoPlayerHTML5Shaka17.setPlaybackRate(this.$VideoPlayerHTML5Shaka8);this.emit("streamResumed")};t.prototype.$VideoPlayerHTML5Shaka50=function(){"use strict";var u=this.$VideoPlayerHTML5Shaka24?this.$VideoPlayerHTML5Shaka24.getOperationLogger("manifest_wrapped").setResource(this.$VideoPlayerHTML5Shaka40).start():null,v=!this.$VideoPlayerHTML5Shaka1.paused;this.unload();this.reload().then(function(){if(this.$VideoPlayerHTML5Shaka9)this.$VideoPlayerHTML5Shaka63();if(v)this.play();if(u)u.log()}.bind(this))["catch"](function(w){if(u)u.setError(w).log()})};t.prototype.$VideoPlayerHTML5Shaka41=function(){"use strict";this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka31)this.$VideoPlayerHTML5Shaka31=false;if(this.$VideoPlayerHTML5Shaka26){this.$VideoPlayerHTML5Shaka26.log();this.$VideoPlayerHTML5Shaka26=null}};t.prototype.$VideoPlayerHTML5Shaka43=function(){"use strict";if(this.$VideoPlayerHTML5Shaka12)this.$VideoPlayerHTML5Shaka12=false;if(this.$VideoPlayerHTML5Shaka26){this.$VideoPlayerHTML5Shaka26.setResult("aborted").log();this.$VideoPlayerHTML5Shaka26=null}};t.prototype.$VideoPlayerHTML5Shaka69=function(){"use strict";if(this.$VideoPlayerHTML5Shaka11)return c("Promise").resolve();if(this.$VideoPlayerHTML5Shaka32+1e3*60*60<Date.now())return c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3).then(function(u){return this.$VideoPlayerHTML5Shaka70(this.$VideoPlayerHTML5Shaka16?u.getHighlightsManifest():u.getDashManifest())}.bind(this));return c("Promise").resolve()};t.prototype.$VideoPlayerHTML5Shaka70=function(u){"use strict";if(!this.$VideoPlayerHTML5Shaka23)return;this.$VideoPlayerHTML5Shaka34=o(u);if(!this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka32=Date.now();this.$VideoPlayerHTML5Shaka23.updateManifest(this.$VideoPlayerHTML5Shaka34)}};t.prototype.$VideoPlayerHTML5Shaka44=function(){"use strict";this.$VideoPlayerHTML5Shaka64();this.$VideoPlayerHTML5Shaka33=c("setInterval")(function(){return this.$VideoPlayerHTML5Shaka69()}.bind(this),1e3*60);return this.$VideoPlayerHTML5Shaka69()["catch"](function(){return c("Promise").resolve()})};t.prototype.refreshDashManifest=function(){"use strict";this.unload();var u=c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3);return u.then(function(v){this.$VideoPlayerHTML5Shaka70(v.getDashManifest());this.$VideoPlayerHTML5Shaka16=false}.bind(this))};t.prototype.refreshLiveVODHighlightsManifest=function(){"use strict";this.unload();var u=c("VideoPlayerMetaData").genVideoData(this.$VideoPlayerHTML5Shaka3);return u.then(function(v){this.$VideoPlayerHTML5Shaka70(v.getHighlightsManifest());this.$VideoPlayerHTML5Shaka16=true}.bind(this))};t.prototype.$VideoPlayerHTML5Shaka64=function(){"use strict";c("clearInterval")(this.$VideoPlayerHTML5Shaka33)};t.prototype.isPlayingLiveVODHighlights=function(){"use strict";return this.$VideoPlayerHTML5Shaka16};f.exports=t}),null);