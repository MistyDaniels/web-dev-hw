if (self.CavalryLogger) { CavalryLogger.start_js(["JpZVm"]); }

__d("AttachmentRelatedShareTimingConstants",[],(function a(b,c,d,e,f,g){var h={EVENT_DELAY:1e3,HIDE_DELAY:100};f.exports=h}),null);
__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIKE:"like",REACT:"react",COMMENT:"comment",ATTACHMENT:"attachment",NETEGO:"netego",COMPOSER_POST:"composer_post"})}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEBUG:"debug",FANNING:"fanning",NONE:"none",STORY_CLICK:"story_click",UFI:"ufi"})}),null);
__d("PubcontentFeedChainingInjectionUtils",["getViewportDimensions"],(function a(b,c,d,e,f,g){"use strict";var h=100,i={isEligibleToInject:function j(k){var l=k.getBoundingClientRect(),m=l.top,n=c("getViewportDimensions").withoutScrollbars(),o=n.height;return!(!!o&&(o-m)/o*100>h)}};f.exports=i}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/events/async/related_events_pivot/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}})}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/feed/ads_chaining/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}})}),null);
__d("XFundraiserAttachmentPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/async/social_good/fundraiser/attachment_pivot/",{ft_id:{type:"String"}})}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/led/async/follow_up_feed_unit/",{ft_id:{type:"String"},story_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}})}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_product/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}})}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/feed_chaining/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},only_qp_allowed:{type:"Bool",defaultValue:false},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/comment_chaining/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"}})}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/group_related_stories/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}})}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/inline_story_pivot_chaining/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}})}),null);
__d("XPubcontentLocalNewsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/local_news_chaining/",{ft_id:{type:"String"},story_id:{type:"String"}})}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/political_issue_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_share/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false},ft_id:{type:"String"}})}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/related_video/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"},cursor:{type:"String"}})}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pubcontent/topic_chaining/",{ft_id:{type:"String",required:true}})}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/games/async/related_games/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}})}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/search/async/related_posts_pivot/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}})}),null);
__d("XSpokespersonProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/spokesperson/related_product/",{ft_id:{type:"String"},reaction_type:{type:"Enum",enumType:0}})}),null);
__d("PubcontentFeedChainingControllerX",["csx","cx","AggregatedLinkComposerConfig","Arbiter","AsyncRequest","AttachmentIssueDiversityShareConstants","AttachmentRelatedShareConstants","AttachmentRelatedShareTimingConstants","ContextualRecommendationsFeedChainingConfig","ContextualThing","CSS","DataAttributeUtils","DOM","DOMQuery","Event","FeedAdsChainingConfig","LEDExperimentEntryPoint","LitestandMessages","NavigationMessage","PageContextualRecommendationsTrigger","PageLikeConstants","Parent","PubcontentFeedChainingConfig","PubcontentFeedChainingInjectionUtils","PubcontentLocalNewsChainingConfig","PubcontentPoliticalIssueChainingConfig","PubcontentRelatedShareChainingConfig","PubcontentTopicChainingConfig","RelatedEventsPivotChainingConfig","Run","SearchRelatedPostsPivotChainingConfig","StoryInlinePivotChainingConfig","SubscriptionsHandler","UFIFeedbackTargets","UFIUIEvents","URI","VideoChannelViewVariables","XEventRelatedEventsPivotController","XFeedAdsChainingController","XFundraiserAttachmentPivotController","XLEDFollowUpFeedUnitController","XPubcontentCommerceProductChainingController","XPubcontentFeedChainingController","XPubcontentFeedCommentChainingController","XPubcontentGroupRelatedStoriesChainingController","XPubcontentInlineStoryPivotChainingController","XPubcontentLocalNewsChainingController","XPubcontentPoliticalIssueChainingController","XPubcontentRelatedShareChainingController","XPubcontentRelatedVideoChainingController","XPubcontentTopicChainingController","XRelatedGamesChainingController","XSearchRelatedPostsPivotController","XSpokespersonProductChainingController","cxodecode","getOrCreateDOMID"],(function a(b,c,d,e,f,g,h,i){"use strict";var j="ei",k="ad_fan_page_action",l="ad_like_page_post_action",m="page_story_like_action",n="political_issue_story_article_click_action",o="local_news_story_article_click_action",p="related_share_article_click",q="related_product_click",r="related_share_video_click",s="related_share_video_view",t="page_share_like_action",u="topic_story_like_action",v="story_click_for_pivot_action",w="story_like_pivot_action",x="event_join",y="composer_publish_action",z="place_checkin_story_action",A="LIKE",B="COMMENT",C=500,D=c("VideoChannelViewVariables").channelPivots,E="._5v9_",F=null,G=false,H=null,I=null;J.init=function(N){var O=N.isLazy,P=N.srs,Q=N.sdrs;if(P&&Q){H=c("cxodecode")(P);I=c("cxodecode")(Q)}if(!F)F=new J({isLazy:O});if(!G){c("Run").onLeave(J.cleanup);c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,J.cleanup);G=true}};J.cleanup=function(){if(F){F.cleanup();F=null}};function J(N){var O=N.isLazy;this.$PubcontentFeedChainingControllerX1=c("PubcontentFeedChainingConfig");this.$PubcontentFeedChainingControllerX2=c("ContextualRecommendationsFeedChainingConfig");this.$PubcontentFeedChainingControllerX3=c("FeedAdsChainingConfig");this.$PubcontentFeedChainingControllerX4=c("PubcontentRelatedShareChainingConfig");this.$PubcontentFeedChainingControllerX5=c("PubcontentTopicChainingConfig");this.$PubcontentFeedChainingControllerX6=c("PubcontentPoliticalIssueChainingConfig");this.$PubcontentFeedChainingControllerX7=c("StoryInlinePivotChainingConfig");this.$PubcontentFeedChainingControllerX8=c("RelatedEventsPivotChainingConfig");this.$PubcontentFeedChainingControllerX9=c("SearchRelatedPostsPivotChainingConfig");this.$PubcontentFeedChainingControllerX10=c("PubcontentLocalNewsChainingConfig");this.$PubcontentFeedChainingControllerX11={};this.$PubcontentFeedChainingControllerX12=null;this.$PubcontentFeedChainingControllerX13=new(c("SubscriptionsHandler"))();this.$PubcontentFeedChainingControllerX13.addSubscriptions(this.$PubcontentFeedChainingControllerX14(c("PageLikeConstants").LIKED,O,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ActionLinkLike,O,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").ReactionButtonClicked,O,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX17.bind(this))),this.$PubcontentFeedChainingControllerX14(c("UFIUIEvents").Comment,O,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX18.bind(this))),this.$PubcontentFeedChainingControllerX14("composer/publish",O,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14("LitestandComposer/publish",O,this.$PubcontentFeedChainingControllerX19.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ARTICLE_CLICK,O,this.$PubcontentFeedChainingControllerX16(this.$PubcontentFeedChainingControllerX20.bind(this))),this.$PubcontentFeedChainingControllerX14(c("AttachmentIssueDiversityShareConstants").ARTICLE_CLICK,O,this.$PubcontentFeedChainingControllerX21.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").VIDEO_CLICK,O,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX23.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW,O,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").FBVIDEO_CLICK,O,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX24.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").GAME_CLICK,O,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PHOTO_CLICK,O,this.$PubcontentFeedChainingControllerX22(this.$PubcontentFeedChainingControllerX26.bind(this),c("LEDExperimentEntryPoint").ATTACHMENT)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").EVENT_JOIN,O,this.$PubcontentFeedChainingControllerX27.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").PRODUCT_CLICK,O,this.$PubcontentFeedChainingControllerX28.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").MAP_CLICK,O,this.$PubcontentFeedChainingControllerX29.bind(this)),this.$PubcontentFeedChainingControllerX14(c("AttachmentRelatedShareConstants").ACTION_BUTTON_CLICK,O,this.$PubcontentFeedChainingControllerX30.bind(this)))}J.prototype.$PubcontentFeedChainingControllerX14=function(event,N,O){var P=N?[event,event+".lazy"]:[event];return c("Arbiter").subscribe(P,O)};J.prototype.cleanup=function(){this.$PubcontentFeedChainingControllerX13&&this.$PubcontentFeedChainingControllerX13.release();this.$PubcontentFeedChainingControllerX13=null};J.getAdClientTokenIndex=function(){return j};J.prototype.$PubcontentFeedChainingControllerX15=function(N,O){var P=this.findAdClientToken(O.target);if(P)this.$PubcontentFeedChainingControllerX31(O.target,{origin:k,actor_id:O.profile_id,client_token:P});else this.$PubcontentFeedChainingControllerX32(O.target,{origin:O.origin,actor_id:O.profile_id,trigger:c("PageContextualRecommendationsTrigger").FANNING,chaining_type:"contextual_recommendations",reaction_type:O.reaction_type})};J.prototype.$PubcontentFeedChainingControllerX17=function(N,O){if(!O.ft_id||!O.target||!O.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX33(this.findStory(O.target))||this.$PubcontentFeedChainingControllerX34(this.findStory(O.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(O.ft_id,function(P,Q){this.$PubcontentFeedChainingControllerX35(P,{ft_id:Q.entidentifier,origin:A,in_place_pivot:true});var R=this.findAdClientToken(P);if(R&&Q.isshare)this.$PubcontentFeedChainingControllerX31(P,{actor_id:Q.actorid,origin:l,ft_id:Q.entidentifier,client_token:R});else if(Q.isActorFBEntity)this.$PubcontentFeedChainingControllerX36(P,{ft_id:Q.entidentifier,reaction_type:O.reaction_type,chaining_type:"contextual_recommendations",origin:A});else if(Q.isownerpage){var S=Q.isshare?t:m;this.$PubcontentFeedChainingControllerX32(P,{actor_id:Q.actorid,content_id:Q.entidentifier,ft_id:Q.entidentifier,origin:S,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:O.reaction_type})}else if(Q.isshare)this.$PubcontentFeedChainingControllerX32(P,{actor_id:Q.actorid,content_id:Q.entidentifier,ft_id:Q.entidentifier,origin:t,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:O.reaction_type});else if(Q.grouporeventid){if(this.shouldPuntGroupChaining(P))return;this.$PubcontentFeedChainingControllerX37(P,{post_id:Q.entidentifier,origin:A})}else if(Q.isownerfriend&&Q.allowpivotqpsonfriendstory)this.$PubcontentFeedChainingControllerX32(P,{actor_id:Q.actorid,content_id:Q.entidentifier,ft_id:Q.entidentifier,origin:A,trigger:c("PageContextualRecommendationsTrigger").UFI,chaining_type:"contextual_recommendations",reaction_type:O.reaction_type,only_qp_allowed:true});else if(Q.isplacecheckin)this.$PubcontentFeedChainingControllerX38(P,{ft_id:Q.entidentifier,origin:z},c("LEDExperimentEntryPoint").LIKE);else{var T=this.$PubcontentFeedChainingControllerX39(P,{origin:w,ft_id:Q.entidentifier});if(!T)this.$PubcontentFeedChainingControllerX40(P,{origin:u,ft_id:Q.entidentifier})}}.bind(this,O.target))};J.prototype.$PubcontentFeedChainingControllerX18=function(N,O){if(!O.ft_id||!O.target)return;if(!this.$PubcontentFeedChainingControllerX33(this.findStory(O.target))||this.$PubcontentFeedChainingControllerX34(this.findStory(O.target)))return;c("UFIFeedbackTargets").getFeedbackTarget(O.ft_id,function(P,Q){this.$PubcontentFeedChainingControllerX35(P,{ft_id:Q.entidentifier,origin:B,in_place_pivot:true});if(Q.grouporeventid){if(this.shouldPuntGroupChaining(P))return;this.$PubcontentFeedChainingControllerX41(P,{origin:B,event_id:Q.grouporeventid})}else if(Q.isplacecheckin)this.$PubcontentFeedChainingControllerX38(P,{ft_id:Q.entidentifier,origin:z},c("LEDExperimentEntryPoint").COMMENT);else this.$PubcontentFeedChainingControllerX42(O.target,{origin:p,action_trigger:B,ft_id:Q.entidentifier})}.bind(this,O.target))};J.prototype.$PubcontentFeedChainingControllerX39=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XPubcontentInlineStoryPivotChainingController").getURIBuilder().setString("origin",O.origin);if(O.story_id)Q.setString("storyid",String(O.story_id));if(O.ft_id)Q.setString("ftid",String(O.ft_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX40=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P||!this.$PubcontentFeedChainingControllerX45())return;var Q=c("XPubcontentTopicChainingController").getURIBuilder().setString("ft_id",O.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q.getURI()).setAllowCrossPageTransition(true).send();return};J.prototype.$PubcontentFeedChainingControllerX46=function(N,O,P,Q){var R=P.ft_id;if(!R){Q&&Q();return}var S=this.findStory(O);if(L(S)||M(S)){Q&&Q();return}var T=this.$PubcontentFeedChainingControllerX43(O,P);if(!T){Q&&Q();return}var U=N.getURIBuilder().setString("ft_id",R);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX44(T.story.id);Q&&Q()}.bind(this)).setRelativeTo(T.chainingWrapper).setURI(U.getURI()).setAllowCrossPageTransition(true).setHandler(function(V){if(!V.payload.is_chained){this.$PubcontentFeedChainingControllerX44(T.story.id);Q&&Q()}}.bind(this)).send();return};J.prototype.$PubcontentFeedChainingControllerX26=function(N,O){var P=this;P.$PubcontentFeedChainingControllerX39(O.attachment,{origin:v,story_id:O.storyid})};J.prototype.$PubcontentFeedChainingControllerX20=function(N,O){this.$PubcontentFeedChainingControllerX47(N,O,true)};J.prototype.$PubcontentFeedChainingControllerX21=function(N,O){this.$PubcontentFeedChainingControllerX47(N,O,false)};J.prototype.$PubcontentFeedChainingControllerX47=function(N,O,P){if(c("AggregatedLinkComposerConfig").no_chained_related_stories==="true")return;var Q=this,R=this.findStory(O.attachment),S=c("DOMQuery").scry(c("DOMQuery").getRootElement(),"#initial_browse_result").length>0;if(S)return;var T;if(O.is_right_click)T=0;else T=c("AttachmentRelatedShareTimingConstants").EVENT_DELAY;setTimeout(function(){if(R){var U=Q.findAttachment(R);if(U)O.attachment=U}O.ft_id=Q.findFeedbackTargetId(R);Q.$PubcontentFeedChainingControllerX46(c("XPubcontentPoliticalIssueChainingController"),O.attachment,{origin:n,ft_id:O.ft_id},function(){if(!P)return;O.origin=p;Q.$PubcontentFeedChainingControllerX48(O.attachment,O)})},T)};J.prototype.$PubcontentFeedChainingControllerX23=function(N,O){if(!this.$PubcontentFeedChainingControllerX45())return;O.origin=r;var P=this,Q=this.findStory(O.attachment);setTimeout(function(){if(Q){var R=P.findAttachment(Q);if(R)O.attachment=R}P.$PubcontentFeedChainingControllerX48(O.attachment,O)},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};J.prototype.$PubcontentFeedChainingControllerX24=function(N,O){if(!this.$PubcontentFeedChainingControllerX45())return;O.origin=N.indexOf(c("AttachmentRelatedShareConstants").FBVIDEO_VIEW)===-1?r:s;var P=this,Q=this.findStory(O.attachment),R=function R(O){if(Q){var S=P.findAttachment(Q);if(S)O.attachment=S}P.$PubcontentFeedChainingControllerX48(O.attachment,O)};if(O.in_smooth_injection_experiment)R(O);else setTimeout(R.bind(this,O),c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};J.prototype.$PubcontentFeedChainingControllerX25=function(N,O){var P=this,Q=this.findStory(O.attachment);setTimeout(function(){if(Q)var R=P.findContainer(Q);P.$PubcontentFeedChainingControllerX49(Q,O.global_share_id,c("getOrCreateDOMID")(R))},c("AttachmentRelatedShareTimingConstants").EVENT_DELAY)};J.prototype.$PubcontentFeedChainingControllerX27=function(N,O){var P=this.findStory(O.attachment);if(P){var Q=this.findAttachment(P);if(Q)O.attachment=Q}this.$PubcontentFeedChainingControllerX41(O.attachment,{origin:x,event_id:O.event_id})};J.prototype.$PubcontentFeedChainingControllerX28=function(N,O){O.origin=q;var P=this.findStory(O.attachment);if(P){var Q=this.findAttachment(P);if(Q)O.attachment=Q}this.$PubcontentFeedChainingControllerX50(O.attachment,O)};J.prototype.$PubcontentFeedChainingControllerX29=function(N,O){this.$PubcontentFeedChainingControllerX38(O.attachment,{story_id:O.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};J.prototype.$PubcontentFeedChainingControllerX30=function(N,O){var P=this.findStory(O.button);if(!P)return;this.$PubcontentFeedChainingControllerX38(P,{story_id:O.story_id,origin:z},c("LEDExperimentEntryPoint").ATTACHMENT)};J.prototype.$PubcontentFeedChainingControllerX19=function(N,O){var P=this;setTimeout(function(){P.$PubcontentFeedChainingControllerX51(O.markup.firstChild,{origin:y,content_id:O.content_id})},this.$PubcontentFeedChainingControllerX9.composer_publish_action)};J.prototype.$PubcontentFeedChainingControllerX52=function(N){return!!(N&&N.id&&!c("CSS").matchesSelector(N,"._sf6")&&!(N.id in this.$PubcontentFeedChainingControllerX11)&&!c("DOM").scry(N,"._4nre")[0])};J.prototype.$PubcontentFeedChainingControllerX53=function(N){if(!N)return false;if(N.origin in this.$PubcontentFeedChainingControllerX1||N.origin in this.$PubcontentFeedChainingControllerX2||N.origin in this.$PubcontentFeedChainingControllerX4||N.origin in this.$PubcontentFeedChainingControllerX3||N.origin in this.$PubcontentFeedChainingControllerX7||N.origin in this.$PubcontentFeedChainingControllerX8||N.origin in this.$PubcontentFeedChainingControllerX9||N.origin in this.$PubcontentFeedChainingControllerX5||N.origin in this.$PubcontentFeedChainingControllerX6||N.origin in this.$PubcontentFeedChainingControllerX10||N.origin===q||N.origin===s||N.origin===z||N.origin===A||N.origin===B)return true;return false};J.prototype.$PubcontentFeedChainingControllerX54=function(N){this.$PubcontentFeedChainingControllerX11[N]=true};J.prototype.$PubcontentFeedChainingControllerX44=function(N){delete this.$PubcontentFeedChainingControllerX11[N]};J.prototype.$PubcontentFeedChainingControllerX33=function(N){if(!N)return false;var O="_3lkn",P=N.nextSibling,Q=true;if(P&&P.firstChild){var R=P.firstChild;Q=!(R.hasChildNodes()&&c("CSS").hasClass(R,O))}if(!Q)return false;var S=N.children[0],T=N.children[1],U="_4_ck";if(S&&c("CSS").hasClass(S,U)||T&&c("CSS").hasClass(T,U))return false;return true};J.prototype.$PubcontentFeedChainingControllerX34=function(N){if(!N)return true;var O=c("DOM").scry(N,"._1xwr");if(O.length)return true;return false};J.prototype.$PubcontentFeedChainingControllerX43=function(N,O){var P=this.findStory(N);if(!this.$PubcontentFeedChainingControllerX52(P))return null;if(!this.$PubcontentFeedChainingControllerX53(O))return null;if(O.in_place_pivot)return{chainingWrapper:P.firstChild,story:P,is_auto_expand:O.is_auto_expand};this.$PubcontentFeedChainingControllerX54(P.id);if(K(P)&&O.chaining_type!=="contextual_recommendations")return null;var Q;if(!O.continued_chaining){Q=this.findContainer(P);if(!Q)return null;var R=c("DOM").create("div"),S=c("DOM").appendContent(Q,R);if(S.length!==1)return null}else{Q=P;R=c("DOM").create("div");S=c("DOM").insertAfter(Q,R);c("DOM").remove(Q);if(S.length!==1)return null}if(O.is_auto_expand)return{chainingWrapper:S[0],story:P,is_auto_expand:O.is_auto_expand};else return{chainingWrapper:S[0],story:P}};J.prototype.$PubcontentFeedChainingControllerX31=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=this.findStreamRoot(P.story);if(!Q)return false;var R=Q.getAttribute("id"),S=c("XFeedAdsChainingController").getURIBuilder().setString("actor_id",O.actor_id).setString("origin",O.origin).setString("ei",O.client_token).setString("data_ownerid",R);if(O.ft_id)S.setString("ft_id",O.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(S.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX48=function(N,O){var P,Q=this;if(!this.$PubcontentFeedChainingControllerX33(this.findStory(N)))return false;var R=this.$PubcontentFeedChainingControllerX43(N,O);if(!R)return false;c("CSS").addClass(R.chainingWrapper,"_3lkn");var S=null;if(O.fbvideo_id){S=c("XPubcontentRelatedVideoChainingController").getURIBuilder();S.setInt("fbvideo_id",O.fbvideo_id)}else{S=c("XPubcontentRelatedShareChainingController").getURIBuilder();S.setInt("global_share_id",O.global_share_id)}S.setString("attachment_div_id",c("getOrCreateDOMID")(O.attachment));if(O.ft_id)S.setString("ft_id",O.ft_id);if(O.link_url)S.setString("link_url",O.link_url);if(O.video_div_id)S.setString("video_div_id",O.video_div_id);if(O.share_id)S.setString("share_id",O.share_id);var T=JSON.parse(c("DataAttributeUtils").getDataFt(R.story))||{};if("qid"in T&&"mf_story_key"in T){S.setString("qid",T.qid);S.setString("mf_story_key",T.mf_story_key)}if(O.is_auto_expand){this.$PubcontentFeedChainingControllerX44(R.story.id);S.setBool("is_auto_expand",O.is_auto_expand)}var U=new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,R.story.id)).setRelativeTo(R.chainingWrapper).setAllowCrossPageTransition(true).setURI(S.getURI());T&&U.setData(T);if(O.in_smooth_injection_experiment)(function(){var V=null,W=c("Event").listen(window,"scroll",function(){this.$PubcontentFeedChainingControllerX55=true;if(V!==null)clearTimeout(V);V=setTimeout(function(){this.$PubcontentFeedChainingControllerX55=false;this.$PubcontentFeedChainingControllerX12&&this.$PubcontentFeedChainingControllerX12();this.$PubcontentFeedChainingControllerX12=null}.bind(this),C)}.bind(Q));c("CSS").hide(R.chainingWrapper);U.setHandler(function(T){if(!this.$PubcontentFeedChainingControllerX55)this.$PubcontentFeedChainingControllerX56(N,R.chainingWrapper,W);else this.$PubcontentFeedChainingControllerX12=this.$PubcontentFeedChainingControllerX56.bind(this,N,R.chainingWrapper,W)}.bind(Q))})();U.send();return true};J.prototype.$PubcontentFeedChainingControllerX49=function(N,O,P){if(!this.$PubcontentFeedChainingControllerX52(N))return null;this.$PubcontentFeedChainingControllerX54(N.id);var Q=c("XRelatedGamesChainingController").getURIBuilder().setInt("app_id",O).setString("attachment_div_id",P);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,N.id)).setURI(Q.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX32=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=this.findStory(N),R=c("XPubcontentFeedChainingController").getURIBuilder().setString("actor_id",O.actor_id).setString("origin",O.origin).setString("referrer",O.referrer).setString("trigger",O.trigger).setBool("is_home_request",this.$PubcontentFeedChainingControllerX45()).setBool("is_sponsored",K(Q)).setEnum("reaction_type",O.reaction_type);if(O.ft_id)R.setString("ft_id",O.ft_id);if(O.content_id)R.setString("content_id",O.content_id);if(O.only_qp_allowed)R.setBool("only_qp_allowed",O.only_qp_allowed);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX41=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XEventRelatedEventsPivotController").getURIBuilder().setInt("event_id",O.event_id).setString("attachment_id",c("getOrCreateDOMID")(N)).setString("trigger_action",O.origin).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX22=function(N,O){return function(P,Q){var R={origin:z};if(Q.storyid)R.story_id=Q.storyid;else{var S=this.findStory(Q.attachment);if(!S)return N(P,Q);R.ft_id=this.findFeedbackTargetId(S)}return this.$PubcontentFeedChainingControllerX38(Q.attachment,R,O,function(){return N(P,Q)})}.bind(this)};J.prototype.$PubcontentFeedChainingControllerX38=function(N,O,P,Q){var R=c("XLEDFollowUpFeedUnitController").getURIBuilder().setEnum("entry_point",P);if(O.ft_id)R=R.setString("ft_id",O.ft_id);if(O.story_id)R=R.setString("story_id",O.story_id);var S=this.$PubcontentFeedChainingControllerX43(N,O);if(!S){Q&&Q();return}new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX44(S.story.id);Q&&Q()}.bind(this)).setHandler(function(T){if(!T.payload.is_chained){this.$PubcontentFeedChainingControllerX44(S.story.id);Q&&Q()}}.bind(this)).setRelativeTo(S.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send()};J.prototype.$PubcontentFeedChainingControllerX16=function(N){return function(O,P){var Q=P.attachment,R=P.ft_id,S=P.storyid;if(!Q||!R&&!S){var T=void 0;if(Q)T=this.findStory(P.attachment);else if(P.target)T=this.findStory(P.target);if(T){if(!R)R=this.findFeedbackTargetId(T);if(!Q)Q=this.findAttachment(T)}}if(!Q||!R&&!S)N(O,P);this.$PubcontentFeedChainingControllerX57(Q,{origin:o,ft_id:R,story_id:S},function(){return N(O,P)})}.bind(this)};J.prototype.$PubcontentFeedChainingControllerX57=function(N,O,P){if(!O.ft_id&&!O.story_id)return false;var Q=this.$PubcontentFeedChainingControllerX43(N,O);if(!Q)return false;var R=c("XPubcontentLocalNewsChainingController").getURIBuilder();if(O.ft_id)R.setString("ft_id",O.ft_id);if(O.story_id)R.setString("story_id",O.story_id);new(c("AsyncRequest"))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX44(Q.story.id);P&&P()}.bind(this)).setHandler(function(S){if(!S.payload.is_chained){this.$PubcontentFeedChainingControllerX44(Q.story.id);P&&P()}}.bind(this)).setRelativeTo(Q.chainingWrapper).setURI(R.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX36=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XSpokespersonProductChainingController").getURIBuilder().setString("ft_id",O.ft_id).setEnum("reaction_type",O.reaction_type).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX50=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XPubcontentCommerceProductChainingController").getURIBuilder().setString("attachment_id",c("getOrCreateDOMID")(N)).setInt("product_id",O.product_id).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX51=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XSearchRelatedPostsPivotController").getURIBuilder().setString("origin",O.origin).setString("content_id",String(O.content_id));new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX42=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XPubcontentFeedCommentChainingController").getURIBuilder().setString("action_trigger",String(O.action_trigger));if(O.ft_id)Q.setString("ft_id",O.ft_id);new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q.getURI()).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX37=function(N,O){var P=this.$PubcontentFeedChainingControllerX43(N,O);if(!P)return false;var Q=c("XPubcontentGroupRelatedStoriesChainingController").getURIBuilder().setInt("post_id",O.post_id).setBool("is_home_request",this.$PubcontentFeedChainingControllerX45()).getURI();new(c("AsyncRequest"))().setErrorHandler(this.$PubcontentFeedChainingControllerX44.bind(this,P.story.id)).setRelativeTo(P.chainingWrapper).setURI(Q).setAllowCrossPageTransition(true).send();return true};J.prototype.$PubcontentFeedChainingControllerX35=function(N,O){var P=c("XFundraiserAttachmentPivotController").getURIBuilder();if(O.ft_id)P=P.setString("ft_id",O.ft_id);var Q=this.$PubcontentFeedChainingControllerX43(N,O);if(!Q)return;new(c("AsyncRequest"))().setRelativeTo(Q.chainingWrapper).setURI(P.getURI()).setAllowCrossPageTransition(true).send()};J.prototype.findStory=function(N){if(!N)return;var O="^div._3lb4",P=c("DOM").scry(N,O);return P.length===1?P[0]:null};J.prototype.findFeedbackTargetId=function(N){if(M(N)){var O=c("DOMQuery").scry(N,"input[name='ft_ent_identifier']"),P=O.find(function(Q){return!L(Q)});if(!P)return null;return P.value}else if(D){var Q=c("DOMQuery").scry(N,"input[name='ft_ent_identifier']")[0];if(!Q)return null;return Q.value}else{var R=c("DOMQuery").find(N,"input[name='ft_ent_identifier']");if(!R)return null;return R.value}};J.prototype.findAttachment=function(N){var O="div._6m2",P="div.iframeEmbed",Q=c("DOM").scry(N,O)[0]||c("DOM").scry(N,P)[0];return Q};J.prototype.findContainer=function(N){var O=c("DOM").create("div"),P=c("DOM").insertAfter(N,O);c("ContextualThing").register(O,N);return P.length>=1?P[0]:null};J.prototype.findStreamRoot=function(N){var O="^div._4ikz";return c("DOM").scry(N,O)[0]};J.prototype.findAdClientToken=function(N){var O=this.findStory(N);if(!O)return null;var P=c("DataAttributeUtils").getDataFt(O);if(!P)return null;var Q=JSON.parse(P);return Q[J.getAdClientTokenIndex()]};J.prototype.shouldPuntGroupChaining=function(N){var O="^._j_2";return c("DOM").scry(N,O).length>=1};J.prototype.$PubcontentFeedChainingControllerX45=function(){var N=c("URI").getRequestURI(false);return N.getPath()==="/"||N.getPath()==="/home.php"};J.prototype.$PubcontentFeedChainingControllerX56=function(N,O,P){var Q=c("PubcontentFeedChainingInjectionUtils").isEligibleToInject(N);if(Q){c("CSS").show(O);c("Arbiter").inform(c("LitestandMessages").STORIES_INSERTED)}else c("DOM").empty(O);P.remove()};function K(N){if(H&&I)return c("DOM").scry(N,H).length>0&&c("DOM").scry(N,I).length===0;else return c("DOM").scry(N,"._5paw").length>0&&c("DOM").scry(N,"._14zs").length===0}function L(N){return!!N&&(c("CSS").matchesSelector(N,E)||!!c("Parent").bySelector(N,E))}function M(N){return!!N&&c("DOM").scry(N,E).length>0}f.exports=J}),null);